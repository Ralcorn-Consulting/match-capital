<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Match Capital ‚Äî Find the right investors. Skip the noise.</title>
<meta name="description" content="The most comprehensive investor intelligence tool for founders. Search 150+ investors by stage, sector, check size, geography, and more. Free and open.">
<meta property="og:type" content="website">
<meta property="og:url" content="https://hq.ralcorporation.com">
<meta property="og:title" content="Match Capital ‚Äî Find the right investors. Skip the noise.">
<meta property="og:description" content="Search 150+ investors by stage, sector, check size, and more. The smartest way to find your next funding partner.">
<meta property="og:image" content="https://hq.ralcorporation.com/og-image.png">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="Match Capital ‚Äî Investor Discovery for Founders">
<meta name="twitter:description" content="Search 150+ investors by stage, sector, check size, and more. Free investor intelligence.">
<meta name="twitter:image" content="https://hq.ralcorporation.com/og-image.png">
<link rel="icon" type="image/svg+xml" href="favicon.svg">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&family=JetBrains+Mono:wght@500&display=swap" rel="stylesheet">
<style>
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
:root{
  --bg:#07070a;--bg-subtle:#0c0c10;--card:#101014;--card-hover:#16161c;
  --border:rgba(255,255,255,0.05);--border-hover:rgba(255,255,255,0.1);
  --text:#ededf0;--text-muted:#8b8b9a;--text-dim:#5a5a6e;
  --accent:#6366f1;--accent-light:#818cf8;--accent2:#a855f7;--accent2-light:#c084fc;
  --green:#10b981;--green-bg:rgba(16,185,129,0.08);
  --radius:14px;--radius-sm:10px;
  --font-mono:'JetBrains Mono',monospace;
  --transition-base:0.2s cubic-bezier(0.4,0,0.2,1);
  --transition-spring:0.4s cubic-bezier(0.16,1,0.3,1);
  --shadow-card:0 1px 2px rgba(0,0,0,0.3),0 4px 16px rgba(0,0,0,0.2);
  --shadow-card-hover:0 8px 40px rgba(0,0,0,0.4),0 0 24px rgba(99,102,241,0.08);
}
html{scroll-behavior:smooth}
body{font-family:'Inter',system-ui,-apple-system,sans-serif;background:var(--bg);color:var(--text);line-height:1.6;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;letter-spacing:-0.01em}
a{color:var(--accent-light);text-decoration:none;transition:color var(--transition-base)}
a:hover{color:var(--accent2-light)}
button{font-family:inherit;cursor:pointer;border:none;background:none;color:inherit;transition:all var(--transition-base)}
input{font-family:inherit;color:inherit}
::selection{background:rgba(99,102,241,0.3)}

/* Gradient text */
.gradient-text{background:linear-gradient(135deg,var(--accent-light),var(--accent2),#ec4899);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}

/* Container */
.container{max-width:1200px;margin:0 auto;padding:0 24px}

/* ===== NAV ===== */
nav{position:fixed;top:0;left:0;right:0;z-index:100;background:rgba(7,7,10,0.75);backdrop-filter:blur(24px) saturate(1.5);border-bottom:1px solid var(--border)}
nav .inner{display:flex;align-items:center;justify-content:space-between;height:60px;max-width:1200px;margin:0 auto;padding:0 24px}
.logo{font-weight:900;font-size:1.15rem;letter-spacing:-0.03em}
.nav-links{display:flex;gap:4px;align-items:center}
.nav-links a,.nav-links button{padding:7px 14px;border-radius:var(--radius-sm);font-size:0.84rem;font-weight:500;color:var(--text-dim);transition:all var(--transition-base);letter-spacing:-0.01em}
.nav-links a:hover,.nav-links button:hover{color:var(--text);background:rgba(255,255,255,0.04)}
.nav-links .saved-count{background:linear-gradient(135deg,var(--accent),var(--accent2));color:#fff;font-size:0.65rem;border-radius:50%;width:18px;height:18px;display:inline-flex;align-items:center;justify-content:center;margin-left:4px;font-weight:700}

/* ===== HERO ===== */
#hero{padding:180px 0 120px;text-align:center;position:relative;overflow:hidden}
#hero::before{content:'';position:absolute;top:-300px;left:50%;transform:translateX(-50%);width:1000px;height:1000px;background:radial-gradient(ellipse at center,rgba(99,102,241,0.12) 0%,rgba(168,85,247,0.06) 40%,transparent 70%);pointer-events:none;animation:heroGlow 8s ease-in-out infinite alternate}
#hero::after{content:'';position:absolute;top:0;left:0;right:0;bottom:0;background:radial-gradient(ellipse at 20% 50%,rgba(236,72,153,0.04),transparent 50%),radial-gradient(ellipse at 80% 50%,rgba(99,102,241,0.04),transparent 50%);pointer-events:none}
@keyframes heroGlow{0%{opacity:0.7;transform:translateX(-50%) scale(1)}100%{opacity:1;transform:translateX(-50%) scale(1.05)}}
#hero h1{font-size:clamp(2.8rem,6.5vw,4.5rem);font-weight:900;letter-spacing:-0.04em;line-height:1.05;margin-bottom:20px;position:relative}
#hero .tagline{font-size:clamp(1rem,2vw,1.2rem);color:var(--text-muted);max-width:560px;margin:0 auto 44px;line-height:1.7;letter-spacing:0}
.hero-ctas{display:flex;gap:12px;justify-content:center;flex-wrap:wrap;position:relative}
.btn-primary{padding:12px 28px;border-radius:var(--radius-sm);background:linear-gradient(135deg,var(--accent),var(--accent2));color:#fff;font-weight:600;font-size:0.9rem;transition:all var(--transition-spring);box-shadow:0 0 24px rgba(99,102,241,0.25),0 1px 2px rgba(0,0,0,0.3);letter-spacing:-0.01em}
.btn-primary:hover{transform:translateY(-2px);box-shadow:0 0 40px rgba(99,102,241,0.35),0 4px 16px rgba(0,0,0,0.3)}
.btn-primary:active{transform:translateY(0);box-shadow:0 0 16px rgba(99,102,241,0.2);transition-duration:0.1s}
.btn-secondary{padding:12px 28px;border-radius:var(--radius-sm);border:1px solid var(--border);color:var(--text-muted);font-weight:500;font-size:0.9rem;transition:all var(--transition-base);letter-spacing:-0.01em}
.btn-secondary:hover{border-color:rgba(99,102,241,0.3);color:var(--text);background:rgba(99,102,241,0.04)}
.btn-secondary:active{transform:scale(0.98);transition-duration:0.1s}

/* Browse All link */
.hero-browse{margin-top:20px;font-size:0.85rem;color:var(--text-dim)}
.hero-browse a{color:var(--accent-light);font-weight:500}
.hero-browse a:hover{color:var(--accent2-light)}

/* ===== SEARCH SECTION ===== */
#search-section{padding:60px 0 40px}
.search-header{margin-bottom:32px}
.search-bar{position:relative;margin-bottom:24px}
.search-bar input{width:100%;padding:16px 20px 16px 48px;border-radius:var(--radius);border:1px solid var(--border);background:var(--card);font-size:0.95rem;outline:none;transition:all var(--transition-base);letter-spacing:-0.005em}
.search-bar input:focus{border-color:rgba(99,102,241,0.5);box-shadow:0 0 0 3px rgba(99,102,241,0.08)}
.search-bar svg{position:absolute;left:16px;top:50%;transform:translateY(-50%);color:var(--text-dim);transition:color var(--transition-base)}
.search-bar:focus-within svg{color:var(--accent-light)}
.search-bar .clear-btn{position:absolute;right:16px;top:50%;transform:translateY(-50%);color:var(--text-dim);font-size:1.2rem;display:none;transition:color var(--transition-base)}
.search-bar .clear-btn:hover{color:var(--text)}
.search-bar .clear-btn.show{display:block}

/* Filters */
.filters{display:flex;flex-direction:column;gap:14px;margin-bottom:32px}
.filter-row{display:flex;flex-wrap:wrap;gap:7px;align-items:center}
.filter-label{font-size:0.7rem;font-weight:600;color:var(--text-dim);text-transform:uppercase;letter-spacing:0.08em;min-width:80px;flex-shrink:0;font-family:var(--font-mono)}
.chip{padding:6px 14px;border-radius:20px;border:1px solid var(--border);font-size:0.78rem;font-weight:500;color:var(--text-muted);transition:all var(--transition-spring);white-space:nowrap}
.chip:hover{border-color:rgba(99,102,241,0.25);color:var(--text);background:rgba(99,102,241,0.03)}
.chip:active{transform:scale(0.95);transition-duration:0.1s}
.chip.active{background:rgba(99,102,241,0.1);border-color:rgba(99,102,241,0.35);color:var(--accent-light);box-shadow:0 0 12px rgba(99,102,241,0.06)}
.filter-row select{padding:6px 14px;border-radius:20px;border:1px solid var(--border);background:var(--card);font-size:0.78rem;color:var(--text-muted);outline:none;transition:border-color var(--transition-base);cursor:pointer}
.filter-row select:hover{border-color:var(--border-hover)}
.filter-row select:focus{border-color:rgba(99,102,241,0.4)}
.filter-row input[type=range]{width:120px;accent-color:var(--accent)}
.range-display{font-size:0.78rem;color:var(--text-muted);min-width:100px;font-family:var(--font-mono)}

/* Results */
.results-info{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px;font-size:0.82rem;color:var(--text-muted);letter-spacing:-0.005em}
.results-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:16px}
@media(max-width:900px){.results-grid{grid-template-columns:repeat(2,1fr)}}
@media(max-width:600px){.results-grid{grid-template-columns:1fr}.filter-label{min-width:60px}}

/* Clear Filters */
.clear-filters-btn{padding:4px 12px;border-radius:20px;border:1px solid rgba(239,68,68,0.2);font-size:0.78rem;font-weight:500;color:#f87171;background:rgba(239,68,68,0.05);transition:all var(--transition-base);margin-left:8px}
.clear-filters-btn:hover{background:rgba(239,68,68,0.1);border-color:rgba(239,68,68,0.4)}
.clear-filters-btn:active{transform:scale(0.95)}
.filter-badge{color:var(--accent-light);font-weight:500}

/* Investor Card */
.investor-card{background:var(--card);border:1px solid var(--border);border-radius:var(--radius);padding:24px;cursor:pointer;transition:all var(--transition-spring);position:relative;overflow:hidden;box-shadow:var(--shadow-card)}
.investor-card:hover{border-color:rgba(99,102,241,0.25);background:var(--card-hover);transform:translateY(-3px);box-shadow:var(--shadow-card-hover)}
.investor-card:active{transform:translateY(-1px);transition-duration:0.1s}
.investor-card::before{content:'';position:absolute;top:0;left:0;right:0;height:1px;background:linear-gradient(90deg,transparent 10%,var(--accent) 40%,var(--accent2) 60%,transparent 90%);opacity:0;transition:opacity 0.4s}
.investor-card:hover::before{opacity:0.8}
.investor-card .card-thesis{font-size:0.8rem;color:var(--text-dim);line-height:1.55;margin-bottom:10px;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;letter-spacing:0}
.investor-card .sector-tags{display:flex;gap:4px;margin-bottom:10px;align-items:center}
.sector-tags .tag-sector{padding:3px 8px;border-radius:6px;font-size:0.68rem;font-weight:500;background:rgba(168,85,247,0.07);color:#c4b5fd;letter-spacing:0.01em}
.sector-tags .tag-overflow{font-size:0.68rem;color:var(--text-dim);padding:3px 6px}

/* Card staggered animation */
@keyframes cardFadeIn{from{opacity:0;transform:translateY(16px)}to{opacity:1;transform:translateY(0)}}
.investor-card{animation:cardFadeIn 0.4s ease both}
.investor-card .card-header{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:12px}
.investor-card .avatar{width:44px;height:44px;border-radius:50%;background:linear-gradient(135deg,var(--accent),var(--accent2),#ec4899);display:flex;align-items:center;justify-content:center;font-weight:700;font-size:0.95rem;color:#fff;flex-shrink:0;letter-spacing:-0.02em}
.investor-card .active-badge{display:flex;align-items:center;gap:4px;font-size:0.7rem;color:var(--green);background:var(--green-bg);padding:4px 10px;border-radius:20px;font-weight:600}
.investor-card .active-badge .dot{width:6px;height:6px;border-radius:50%;background:var(--green);animation:pulse 2s infinite}
@keyframes pulse{0%,100%{opacity:1}50%{opacity:0.4}}
.investor-card .name{font-weight:700;font-size:0.95rem;margin-bottom:2px;letter-spacing:-0.02em}
.investor-card .firm{font-size:0.82rem;color:var(--text-muted);margin-bottom:12px}
.investor-card .type-badge{display:inline-block;padding:3px 10px;border-radius:20px;font-size:0.68rem;font-weight:600;margin-bottom:12px;letter-spacing:0.01em}
.type-vc{background:rgba(99,102,241,0.1);color:var(--accent-light)}
.type-angel{background:rgba(250,204,21,0.1);color:#fbbf24}
.type-family-office{background:rgba(16,185,129,0.1);color:#34d399}
.type-corp-vc{background:rgba(168,85,247,0.1);color:var(--accent2-light)}
.type-angel-group{background:rgba(251,146,60,0.1);color:#fb923c}
/* Org avatar */
.avatar-org{border-radius:var(--radius-sm) !important;background:linear-gradient(135deg,#6366f1,#8b5cf6) !important;font-size:0.7rem !important}
.member-count-badge{display:inline-flex;align-items:center;gap:3px;font-size:0.7rem;color:var(--accent);background:rgba(59,130,246,0.08);padding:3px 8px;border-radius:12px;font-weight:600}
.key-people-list{list-style:none;padding:0}
.key-people-list li{padding:4px 0;font-size:0.85rem;color:var(--text-muted)}
.investor-card .tags{display:flex;flex-wrap:wrap;gap:4px;margin-bottom:12px}
.tag{padding:3px 8px;border-radius:6px;font-size:0.68rem;font-weight:500;background:rgba(255,255,255,0.03);color:var(--text-dim);letter-spacing:0.01em}
.tag-stage{background:rgba(99,102,241,0.07);color:#a5b4fc}
.tag-sector{background:rgba(168,85,247,0.07);color:#c4b5fd}
.investor-card .check-size{font-size:0.78rem;color:var(--text-muted);margin-bottom:4px;font-family:var(--font-mono);font-weight:500}
.investor-card .location{font-size:0.78rem;color:var(--text-dim)}

/* ===== MODAL ===== */
.modal-overlay{position:fixed;inset:0;z-index:200;background:rgba(0,0,0,0);backdrop-filter:blur(0px);display:none;align-items:center;justify-content:center;padding:24px;transition:background 0.4s cubic-bezier(0.4,0,0.2,1),backdrop-filter 0.4s cubic-bezier(0.4,0,0.2,1)}
.modal-overlay.open{display:flex}
.modal-overlay.open.animate-in{background:rgba(0,0,0,0.75);backdrop-filter:blur(12px)}
.modal{background:var(--bg);border:1px solid var(--border);border-radius:16px;width:100%;max-width:820px;max-height:90vh;overflow-y:auto;position:relative;opacity:0;transform:translateY(30px) scale(0.97);transition:opacity 0.4s cubic-bezier(0.4,0,0.2,1),transform 0.4s cubic-bezier(0.4,0,0.2,1)}
.modal-overlay.open.animate-in .modal{opacity:1;transform:translateY(0) scale(1)}
.modal-overlay.animate-out .modal{opacity:0;transform:translateY(20px) scale(0.97);transition:opacity 0.25s cubic-bezier(0.4,0,0.2,1),transform 0.25s cubic-bezier(0.4,0,0.2,1)}
.modal-overlay.animate-out{background:rgba(0,0,0,0);backdrop-filter:blur(0px);transition:background 0.25s cubic-bezier(0.4,0,0.2,1),backdrop-filter 0.25s cubic-bezier(0.4,0,0.2,1)}
.modal-close{position:absolute;top:16px;right:16px;font-size:1.5rem;color:var(--text-dim);z-index:1;width:36px;height:36px;display:flex;align-items:center;justify-content:center;border-radius:50%;transition:background 0.2s}
.modal-close:hover{background:rgba(255,255,255,0.05)}
.modal-header{padding:32px 32px 0;display:flex;gap:20px;align-items:flex-start}
.modal-avatar{width:64px;height:64px;border-radius:50%;background:linear-gradient(135deg,var(--accent),var(--accent2),#ec4899);display:flex;align-items:center;justify-content:center;font-weight:700;font-size:1.5rem;color:#fff;flex-shrink:0}
.modal-header-info{flex:1}
.modal-header-info h2{font-size:1.5rem;font-weight:700;margin-bottom:2px;display:flex;align-items:center;gap:8px}
.modal-header-info .firm{font-size:1rem;color:var(--text-muted);margin-bottom:8px}
.modal-header-info .badges{display:flex;gap:8px;flex-wrap:wrap;align-items:center}
.modal-body{padding:24px 32px 32px}
.modal-section{margin-bottom:24px}
.modal-section h3{font-size:0.7rem;font-weight:600;color:var(--text-dim);text-transform:uppercase;letter-spacing:0.1em;margin-bottom:12px;display:flex;align-items:center;gap:8px;font-family:var(--font-mono)}
.modal-section h3::after{content:'';flex:1;height:1px;background:var(--border);opacity:0.6}
.modal-section p{color:var(--text-muted);font-size:0.9rem;line-height:1.7}
.modal-tags{display:flex;flex-wrap:wrap;gap:6px}
.modal-tags .tag{padding:5px 12px;font-size:0.8rem}
.investment-list{list-style:none}
.investment-list li{display:flex;justify-content:space-between;padding:8px 0;border-bottom:1px solid var(--border);font-size:0.9rem}
.investment-list li:last-child{border:none}
.investment-list .company{font-weight:600}
.investment-list .round-year{color:var(--text-muted)}
.modal-links-row{display:flex;gap:8px}
.modal-links-row a{width:40px;height:40px;border-radius:50%;border:1px solid var(--border);display:flex;align-items:center;justify-content:center;font-size:1.1rem;color:var(--text-muted);transition:all 0.2s;text-decoration:none}
.modal-links-row a:hover{border-color:var(--accent);color:var(--text);background:rgba(59,130,246,0.08)}
.modal-actions{display:flex;gap:12px;margin-top:24px;padding-top:24px;border-top:1px solid var(--border)}
.btn-save{padding:10px 24px;border-radius:var(--radius-sm);background:linear-gradient(135deg,var(--accent),var(--accent2));color:#fff;font-weight:600;font-size:0.9rem;transition:all 0.2s}
.btn-save:hover{box-shadow:0 0 20px rgba(59,130,246,0.3)}
.btn-save.saved{background:rgba(255,255,255,0.06);color:var(--text-muted)}
.fund-info{display:grid;grid-template-columns:1fr 1fr;gap:12px}
.fund-info-item{background:rgba(255,255,255,0.02);border-radius:var(--radius-sm);padding:12px 16px}
.fund-info-item .label{font-size:0.75rem;color:var(--text-dim);margin-bottom:4px}
.fund-info-item .value{font-weight:600;font-size:0.9rem}
/* Profile two-column grid */
.profile-grid{display:grid;grid-template-columns:1fr 1fr;gap:0 32px}
.profile-grid .full-width{grid-column:1/-1}
.profile-col{display:flex;flex-direction:column;gap:0}
.profile-col .modal-section:last-child{margin-bottom:0}
.modal-divider{border:none;border-top:1px solid var(--border);margin:4px 0 20px;opacity:0.5}
/* Social proof */
.social-proof{display:flex;gap:16px;flex-wrap:wrap;margin-bottom:20px;padding:12px 16px;background:rgba(255,255,255,0.02);border-radius:var(--radius-sm);border:1px solid var(--border)}
.proof-item{display:flex;align-items:center;gap:6px;font-size:0.8rem;color:var(--text-muted)}
.proof-item .proof-val{font-weight:700;color:var(--text)}
.verified-badge{display:inline-flex;align-items:center;gap:4px;padding:3px 10px;border-radius:20px;font-size:0.7rem;font-weight:600;background:rgba(59,130,246,0.1);color:#60a5fa}
.activity-dot{width:8px;height:8px;border-radius:50%;display:inline-block}
.activity-dot.green{background:var(--green)}
.activity-dot.yellow{background:#eab308}
.activity-dot.gray{background:#52525b}
/* Similar investors */
.similar-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(160px,1fr));gap:12px}
.similar-card{background:rgba(255,255,255,0.02);border:1px solid var(--border);border-radius:var(--radius-sm);padding:16px;text-align:center;transition:all 0.25s ease;cursor:pointer;position:relative;overflow:hidden}
.similar-card::before{content:'';position:absolute;top:0;left:0;right:0;height:2px;background:linear-gradient(90deg,transparent,var(--accent),var(--accent2),transparent);opacity:0;transition:opacity 0.3s}
.similar-card:hover{border-color:rgba(99,102,241,0.4);background:var(--card-hover);transform:translateY(-2px);box-shadow:0 4px 16px rgba(0,0,0,0.2)}
.similar-card:hover::before{opacity:1}
.similar-card .sim-avatar{width:40px;height:40px;border-radius:50%;background:linear-gradient(135deg,var(--accent),var(--accent2),#ec4899);display:flex;align-items:center;justify-content:center;font-weight:700;font-size:0.8rem;color:#fff;margin:0 auto 10px}
.similar-card .sim-name{font-weight:600;font-size:0.85rem;margin-bottom:2px}
.similar-card .sim-firm{font-size:0.75rem;color:var(--text-muted);margin-bottom:4px}
.similar-card .sim-overlap{font-size:0.7rem;color:var(--text-dim);margin-bottom:8px}
.similar-card .sim-link{font-size:0.75rem;color:var(--accent);font-weight:500;transition:color 0.2s}
.similar-card:hover .sim-link{color:var(--accent2)}
/* Add to list dropdown in modal header */
.modal-list-dropdown{position:relative;display:inline-block}
.modal-list-dd-content{position:absolute;top:100%;left:0;margin-top:4px;background:var(--card);border:1px solid var(--border);border-radius:var(--radius-sm);padding:6px;z-index:10;box-shadow:0 8px 30px rgba(0,0,0,0.4);min-width:200px;max-height:240px;overflow-y:auto;display:none}
.modal-list-dd-content.show{display:block}
.modal-list-dd-item{padding:8px 12px;border-radius:6px;font-size:0.82rem;color:var(--text-muted);cursor:pointer;transition:background 0.15s;display:flex;align-items:center;gap:8px}
.modal-list-dd-item:hover{background:rgba(255,255,255,0.05);color:var(--text)}
.modal-list-dd-item input[type=checkbox]{accent-color:var(--accent)}

/* ===== SAVED SECTION ===== */
#saved-section{padding:60px 0;display:none}
#saved-section h2{font-size:1.5rem;font-weight:700;margin-bottom:8px}
#saved-section .subtitle{color:var(--text-muted);margin-bottom:24px;font-size:0.9rem}
.saved-actions{display:flex;gap:12px;margin-bottom:24px}
.saved-empty{text-align:center;padding:60px 0;color:var(--text-dim)}

/* Nav active underline */
.nav-links a.nav-active,.nav-links button.nav-active{color:var(--text);position:relative}
.nav-links a.nav-active::after,.nav-links button.nav-active::after{content:'';position:absolute;bottom:-2px;left:8px;right:8px;height:2px;background:linear-gradient(90deg,var(--accent),var(--accent2),#ec4899);border-radius:2px}

/* ===== FOOTER ===== */
footer{padding:60px 0 40px;border-top:1px solid var(--border);margin-top:100px;background:var(--bg-subtle)}
footer .inner{display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:16px;max-width:1200px;margin:0 auto;padding:0 24px}
footer .left{font-size:0.72rem;color:var(--text-dim);letter-spacing:0}
footer .links{display:flex;gap:20px}
footer .links a{font-size:0.72rem;color:var(--text-dim);transition:color var(--transition-base)}
footer .links a:hover{color:var(--text)}

/* Scrollbar */
::-webkit-scrollbar{width:6px}
::-webkit-scrollbar-track{background:transparent}
::-webkit-scrollbar-thumb{background:rgba(255,255,255,0.1);border-radius:3px}

/* No results */
.no-results{grid-column:1/-1;text-align:center;padding:60px 0;color:var(--text-dim)}
.no-results .no-results-icon{font-size:3rem;margin-bottom:16px;opacity:0.5}
.no-results .no-results-hint{font-size:0.85rem;color:var(--text-dim);margin-top:8px}

/* Loading skeleton */
@keyframes shimmer{0%{background-position:-400px 0}100%{background-position:400px 0}}
.skeleton-card{background:var(--card);border:1px solid var(--border);border-radius:var(--radius);padding:24px;min-height:240px}
.skeleton-line{height:12px;border-radius:6px;background:linear-gradient(90deg,rgba(255,255,255,0.04) 25%,rgba(255,255,255,0.08) 50%,rgba(255,255,255,0.04) 75%);background-size:800px;animation:shimmer 1.5s infinite linear;margin-bottom:12px}
.skeleton-line.w60{width:60%}
.skeleton-line.w40{width:40%}
.skeleton-line.w80{width:80%}
.skeleton-circle{width:44px;height:44px;border-radius:50%;background:linear-gradient(90deg,rgba(255,255,255,0.04) 25%,rgba(255,255,255,0.08) 50%,rgba(255,255,255,0.04) 75%);background-size:800px;animation:shimmer 1.5s infinite linear;margin-bottom:12px}

/* Mobile improvements */
@media(max-width:600px){
  .container{padding:0 16px}
  nav .inner{padding:0 16px}
  .search-bar input{padding:14px 16px 14px 44px;font-size:0.95rem}
  .filter-row{gap:6px}
  .chip{padding:8px 14px;font-size:0.82rem}
  .investor-card{padding:18px}
  .modal-header{padding:24px 20px 0;flex-direction:column;align-items:center;text-align:center}
  .modal-body{padding:20px}
  .profile-grid{grid-template-columns:1fr}
  .fund-info{grid-template-columns:1fr}
  .compare-grid.cols-2,.compare-grid.cols-3{grid-template-columns:1fr;gap:0}
  .compare-cell.label{background:var(--card);font-weight:700;border-top:1px solid var(--border)}
  .hero-ctas{flex-direction:column;align-items:center}
  #hero{padding:120px 0 60px}
  #hero h1{font-size:2rem}
  .modal{max-height:95vh;border-radius:16px 16px 0 0}
  .profile-grid{grid-template-columns:1fr !important}
  .similar-grid{grid-template-columns:repeat(2,1fr)}
}

/* ===== COMPARE ===== */
.compare-btn{position:absolute;top:12px;right:12px;width:28px;height:28px;border-radius:50%;border:2px solid var(--border);background:var(--card);display:flex;align-items:center;justify-content:center;font-size:0.75rem;color:var(--text-dim);transition:all 0.2s;z-index:2}
.compare-btn:hover{border-color:var(--accent);color:var(--accent)}
.compare-btn.selected{background:var(--accent);border-color:var(--accent);color:#fff}
/* Sticky compare bar */
.compare-bar{position:fixed;bottom:0;left:0;right:0;z-index:150;background:rgba(9,9,11,0.92);backdrop-filter:blur(24px);border-top:1px solid rgba(59,130,246,0.2);padding:0;display:none;flex-direction:column;align-items:center;box-shadow:0 -8px 32px rgba(0,0,0,0.4),0 -2px 16px rgba(59,130,246,0.08);transition:transform 0.3s cubic-bezier(0.4,0,0.2,1)}
.compare-bar::before{content:'';position:absolute;top:0;left:0;right:0;height:1px;background:linear-gradient(90deg,transparent,var(--accent),var(--accent2),transparent)}
.compare-bar.show{display:flex}
.compare-bar-inner{display:flex;align-items:center;justify-content:center;gap:16px;padding:14px 24px;width:100%;max-width:1200px}
.compare-bar .avatars{display:flex;align-items:center}
.compare-bar .mini-chip{display:flex;align-items:center;gap:8px;background:rgba(255,255,255,0.05);border:1px solid var(--border);border-radius:24px;padding:6px 14px 6px 6px;margin-left:8px;transition:all 0.2s}
.compare-bar .mini-chip:first-child{margin-left:0}
.compare-bar .mini-chip:hover{border-color:rgba(239,68,68,0.4)}
.compare-bar .mini-avatar{width:28px;height:28px;border-radius:50%;background:linear-gradient(135deg,var(--accent),var(--accent2),#ec4899);display:flex;align-items:center;justify-content:center;font-size:0.65rem;font-weight:700;color:#fff;flex-shrink:0}
.compare-bar .mini-name{font-size:0.8rem;font-weight:500;color:var(--text);max-width:100px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}
.compare-bar .mini-remove{font-size:0.7rem;color:var(--text-dim);cursor:pointer;margin-left:4px;transition:color 0.2s}
.compare-bar .mini-remove:hover{color:#f87171}
.compare-bar .bar-actions{display:flex;gap:8px;align-items:center}
.compare-bar .compare-count{font-size:0.75rem;color:var(--text-dim);margin-right:4px}
.compare-modal{background:var(--bg);border:1px solid var(--border);border-radius:16px;width:100%;max-width:1100px;max-height:90vh;overflow-y:auto;position:relative;animation:modalIn 0.25s ease;padding:32px}
@keyframes modalIn{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}
/* Compare table */
.compare-table{width:100%;border-collapse:separate;border-spacing:0;border:1px solid var(--border);border-radius:var(--radius);overflow:hidden}
.compare-table th,.compare-table td{padding:14px 16px;text-align:left;border-bottom:1px solid var(--border);font-size:0.85rem;vertical-align:top}
.compare-table th{background:var(--card);font-weight:600;color:var(--text-dim);font-size:0.72rem;text-transform:uppercase;letter-spacing:0.06em;width:140px;white-space:nowrap}
.compare-table td{color:var(--text-muted);transition:background 0.2s}
.compare-table tr:last-child th,.compare-table tr:last-child td{border-bottom:none}
.compare-table td.match{background:rgba(34,197,94,0.06);color:var(--text)}
.compare-table td.match .match-icon{color:var(--green);font-size:0.7rem;margin-right:4px}
.compare-table .header-cell{text-align:center;padding:24px 16px;background:var(--card);border-bottom:1px solid var(--border)}
.compare-table .header-cell .name{font-weight:700;font-size:1.05rem;color:var(--text);margin-top:10px}
.compare-table .header-cell .firm{font-size:0.82rem;color:var(--text-muted);margin-top:2px}
.compare-table .header-cell .compare-remove{margin-top:8px;font-size:0.75rem;color:var(--text-dim);padding:4px 12px;border-radius:20px;border:1px solid var(--border);transition:all 0.2s;display:inline-block}
.compare-table .header-cell .compare-remove:hover{border-color:rgba(239,68,68,0.5);color:#f87171}
/* Compare export bar */
.compare-export{display:flex;gap:8px;margin-top:20px;justify-content:flex-end;flex-wrap:wrap}
.compare-export button{padding:8px 16px;border-radius:var(--radius-sm);border:1px solid var(--border);font-size:0.8rem;font-weight:500;color:var(--text-muted);transition:all 0.2s;display:inline-flex;align-items:center;gap:6px}
.compare-export button:hover{border-color:var(--border-hover);color:var(--text);background:rgba(255,255,255,0.03)}
.compare-export button.copied{border-color:var(--green);color:var(--green)}

/* ===== NAMED LISTS ===== */
.list-tabs{display:flex;gap:8px;flex-wrap:wrap;margin-bottom:24px}
.list-tab{padding:8px 16px;border-radius:20px;border:1px solid var(--border);font-size:0.8rem;font-weight:500;color:var(--text-muted);transition:all 0.2s;display:flex;align-items:center;gap:6px}
.list-tab:hover{border-color:var(--border-hover);color:var(--text)}
.list-tab.active{background:linear-gradient(135deg,rgba(59,130,246,0.15),rgba(139,92,246,0.15));border-color:rgba(59,130,246,0.4);color:var(--text)}
.list-tab .count{background:rgba(255,255,255,0.08);padding:2px 7px;border-radius:10px;font-size:0.7rem}
.list-tab.active .count{background:rgba(59,130,246,0.3)}
.save-dropdown{position:absolute;bottom:100%;left:0;right:0;background:var(--card);border:1px solid var(--border);border-radius:var(--radius-sm);padding:6px;z-index:10;box-shadow:0 -8px 30px rgba(0,0,0,0.4);margin-bottom:4px;max-height:240px;overflow-y:auto}
.save-dropdown-item{padding:8px 12px;border-radius:6px;font-size:0.85rem;color:var(--text-muted);cursor:pointer;transition:background 0.15s;display:flex;align-items:center;gap:8px}
.save-dropdown-item:hover{background:rgba(255,255,255,0.05);color:var(--text)}
.save-dropdown-item.in-list{color:var(--accent)}
.save-dropdown-item.create{color:var(--accent);border-top:1px solid var(--border);margin-top:4px;padding-top:12px}
.save-dropdown .new-list-input{width:100%;padding:8px 12px;border-radius:6px;border:1px solid var(--border);background:var(--bg);font-size:0.85rem;outline:none;margin-top:4px}
.save-dropdown .new-list-input:focus{border-color:var(--accent)}
.save-wrap{position:relative;display:inline-block}
.delete-list-btn{font-size:0.75rem;color:var(--text-dim);padding:4px 8px;border-radius:4px;transition:all 0.2s;margin-left:auto}
.delete-list-btn:hover{color:#f87171;background:rgba(239,68,68,0.1)}

/* List tab context menu */
.list-tab-menu{position:absolute;background:var(--card);border:1px solid var(--border);border-radius:var(--radius-sm);padding:4px;z-index:300;box-shadow:0 8px 30px rgba(0,0,0,0.5);min-width:140px}
.list-tab-menu-item{padding:8px 12px;border-radius:6px;font-size:0.82rem;color:var(--text-muted);cursor:pointer;transition:background 0.15s;display:flex;align-items:center;gap:8px}
.list-tab-menu-item:hover{background:rgba(255,255,255,0.05);color:var(--text)}
.list-tab-menu-item.danger{color:#f87171}
.list-tab-menu-item.danger:hover{background:rgba(239,68,68,0.1)}

/* Move to list dropdown on cards in saved view */
.card-move-btn{position:absolute;top:12px;left:12px;padding:4px 10px;border-radius:16px;border:1px solid var(--border);background:var(--card);font-size:0.7rem;color:var(--text-dim);z-index:2;transition:all 0.2s;opacity:0}
.investor-card:hover .card-move-btn{opacity:1}
.card-move-btn:hover{border-color:var(--accent);color:var(--accent-light);background:rgba(99,102,241,0.08)}
.card-move-menu{position:absolute;top:100%;left:0;margin-top:4px;background:var(--card);border:1px solid var(--border);border-radius:var(--radius-sm);padding:4px;z-index:10;box-shadow:0 8px 30px rgba(0,0,0,0.4);min-width:160px}
.card-move-menu-item{padding:7px 12px;border-radius:6px;font-size:0.8rem;color:var(--text-muted);cursor:pointer;transition:background 0.15s;display:flex;align-items:center;gap:6px}
.card-move-menu-item:hover{background:rgba(255,255,255,0.05);color:var(--text)}
.card-move-menu-item.in-list{color:var(--accent)}
.card-move-menu-item.remove{color:#f87171}
.card-move-menu-item.remove:hover{background:rgba(239,68,68,0.08)}

/* Inline rename input in tabs */
.list-tab-rename{padding:6px 12px;border-radius:20px;border:1px solid var(--accent);background:var(--bg);font-size:0.8rem;color:var(--text);outline:none;font-family:inherit;width:140px}

/* Saved section improvements */
.saved-header-row{display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:12px;margin-bottom:8px}
.saved-list-info{font-size:0.82rem;color:var(--text-dim)}

/* ===== ANALYTICS PANEL ===== */
.analytics-toggle{display:flex;align-items:center;gap:8px;margin-bottom:16px;cursor:pointer;user-select:none;font-size:0.85rem;color:var(--text-muted);transition:color 0.2s}
.analytics-toggle:hover{color:var(--text)}
.analytics-toggle .chevron{transition:transform 0.3s;font-size:0.7rem}
.analytics-toggle .chevron.open{transform:rotate(90deg)}
.analytics-panel{overflow:hidden;max-height:0;opacity:0;transition:max-height 0.4s ease,opacity 0.3s ease,margin 0.3s ease;margin-bottom:0}
.analytics-panel.open{max-height:800px;opacity:1;margin-bottom:24px}
.stats-counters{display:grid;grid-template-columns:repeat(4,1fr);gap:12px;margin-bottom:20px}
@media(max-width:700px){.stats-counters{grid-template-columns:repeat(2,1fr)}}
.stat-card{background:var(--card);border:1px solid var(--border);border-radius:var(--radius-sm);padding:16px;text-align:center;transition:border-color var(--transition-base)}
.stat-card:hover{border-color:var(--border-hover)}
.stat-card .stat-value{font-size:1.6rem;font-weight:800;background:linear-gradient(135deg,var(--accent-light),var(--accent2));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;font-family:var(--font-mono);letter-spacing:-0.02em}
.stat-card .stat-label{font-size:0.68rem;color:var(--text-dim);text-transform:uppercase;letter-spacing:0.06em;margin-top:4px;font-family:var(--font-mono)}
.analytics-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:16px}
@media(max-width:900px){.analytics-grid{grid-template-columns:1fr 1fr}}
@media(max-width:600px){.analytics-grid{grid-template-columns:1fr}}
.analytics-card{background:var(--card);border:1px solid var(--border);border-radius:var(--radius-sm);padding:16px}
.analytics-card h4{font-size:0.72rem;font-weight:600;color:var(--text-dim);text-transform:uppercase;letter-spacing:0.05em;margin-bottom:12px}
.bar-row{display:flex;align-items:center;gap:8px;margin-bottom:8px;font-size:0.8rem}
.bar-row:last-child{margin-bottom:0}
.bar-label{min-width:80px;color:var(--text-muted);flex-shrink:0;text-align:right}
.bar-track{flex:1;height:8px;background:rgba(255,255,255,0.04);border-radius:4px;overflow:hidden}
.bar-fill{height:100%;border-radius:4px;transition:width 0.6s ease}
.bar-count{min-width:28px;font-size:0.75rem;color:var(--text-dim);font-weight:600}
.bar-fill.fill-vc{background:linear-gradient(90deg,#3b82f6,#60a5fa)}
.bar-fill.fill-angel{background:linear-gradient(90deg,#eab308,#fbbf24)}
.bar-fill.fill-family-office{background:linear-gradient(90deg,#22c55e,#4ade80)}
.bar-fill.fill-corp-vc{background:linear-gradient(90deg,#a855f7,#c084fc)}
.bar-fill.fill-angel-group{background:linear-gradient(90deg,#f97316,#fb923c)}
.bar-fill.fill-stage{background:linear-gradient(90deg,var(--accent),#93c5fd)}
.bar-fill.fill-geo{background:linear-gradient(90deg,var(--accent2),#c4b5fd)}

/* How it works / onboarding */
.onboarding-banner{background:var(--card);border:1px solid var(--border);border-radius:var(--radius);padding:24px 28px;margin-bottom:28px;position:relative;overflow:hidden}
.onboarding-banner::before{content:'';position:absolute;top:0;left:0;right:0;height:1px;background:linear-gradient(90deg,transparent,var(--accent),var(--accent2),#ec4899,transparent)}
.onboarding-header{display:flex;justify-content:space-between;align-items:center;cursor:pointer;user-select:none}
.onboarding-header h3{font-size:0.9rem;font-weight:600;color:var(--text);display:flex;align-items:center;gap:8px}
.onboarding-dismiss{color:var(--text-dim);font-size:0.8rem;padding:4px 10px;border-radius:20px;border:1px solid var(--border);transition:all 0.2s}
.onboarding-dismiss:hover{color:var(--text);border-color:var(--border-hover)}
.onboarding-body{display:grid;grid-template-columns:repeat(3,1fr);gap:20px;margin-top:20px}
.onboarding-step{text-align:center;padding:16px 12px}
.onboarding-step .step-icon{font-size:1.8rem;margin-bottom:8px}
.onboarding-step .step-title{font-weight:600;font-size:0.85rem;margin-bottom:4px}
.onboarding-step .step-desc{font-size:0.78rem;color:var(--text-muted);line-height:1.5}
@media(max-width:600px){.onboarding-body{grid-template-columns:1fr;gap:8px}.onboarding-step{padding:10px 8px}}
.onboarding-banner.collapsed .onboarding-body{display:none}

/* Share buttons in modal */
.share-buttons{display:flex;gap:8px;flex-wrap:wrap;align-items:center}
.share-btn{padding:8px 16px;border-radius:var(--radius-sm);border:1px solid var(--border);font-size:0.8rem;font-weight:500;color:var(--text-muted);transition:all 0.2s;display:inline-flex;align-items:center;gap:6px}
.share-btn:hover{border-color:var(--border-hover);color:var(--text);background:rgba(255,255,255,0.03)}
.share-btn.copied{border-color:var(--green);color:var(--green)}

/* ===== ACCESSIBILITY ===== */
/* Skip to content link */
.skip-link{position:absolute;top:-100%;left:16px;padding:12px 24px;background:var(--accent);color:#fff;border-radius:var(--radius-sm);font-weight:600;font-size:0.9rem;z-index:1000;transition:top 0.2s}
.skip-link:focus{top:8px}

/* Focus ring styling */
*:focus-visible{outline:2px solid var(--accent-light);outline-offset:2px;border-radius:4px}
.chip:focus-visible{outline-offset:0;box-shadow:0 0 0 2px var(--bg),0 0 0 4px var(--accent-light)}
.investor-card:focus-visible{outline:2px solid var(--accent-light);outline-offset:-2px;border-color:rgba(99,102,241,0.5);background:var(--card-hover);transform:translateY(-3px);box-shadow:var(--shadow-card-hover)}
.btn-primary:focus-visible,.btn-secondary:focus-visible{outline-offset:2px}
.search-bar input:focus-visible{outline:none}
.modal-close:focus-visible{outline-offset:-2px}
.compare-btn:focus-visible{outline-offset:-2px}
.similar-card:focus-visible{outline:2px solid var(--accent-light);outline-offset:-2px}
.nav-links a:focus-visible,.nav-links button:focus-visible{outline-offset:0}

/* Card keyboard focus indicator */
.investor-card.kb-focused{border-color:rgba(99,102,241,0.5);background:var(--card-hover);transform:translateY(-3px);box-shadow:var(--shadow-card-hover)}
.investor-card.kb-focused::before{opacity:0.8}

/* Reduced motion */
@media(prefers-reduced-motion:reduce){
  *,*::before,*::after{animation-duration:0.01ms !important;animation-iteration-count:1 !important;transition-duration:0.01ms !important;scroll-behavior:auto !important}
  .investor-card{animation:none !important}
  .investor-card:hover,.investor-card.kb-focused,.investor-card:focus-visible{transform:none !important}
  .similar-card:hover{transform:none !important}
  .btn-primary:hover{transform:none !important}
  .modal{transition:none !important}
  .modal-overlay{transition:none !important}
  #hero::before{animation:none !important}
  .active-badge .dot{animation:none !important}
  .skeleton-line,.skeleton-circle{animation:none !important}
  html{scroll-behavior:auto !important}
}

/* Visually hidden (screen reader only) */
.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}
</style>
</head>
<body>

<!-- Skip to content -->
<a href="#search-section" class="skip-link" onclick="showSection('search')">Skip to main content</a>

<!-- NAV -->
<nav aria-label="Main navigation">
  <div class="inner">
    <div class="logo"><span class="gradient-text">Match Capital</span></div>
    <div class="nav-links" role="menubar">
      <a href="#" onclick="showSection('hero')" role="menuitem">Home</a>
      <a href="#search" onclick="showSection('search')" role="menuitem">Search</a>
      <button onclick="showSection('saved')" role="menuitem">Saved <span class="saved-count" id="savedCount" aria-label="saved investors count">0</span></button>
    </div>
  </div>
</nav>

<!-- HERO -->
<section id="hero" aria-label="Hero">
  <div class="container">
    <h1>Find the right investors.<br><span class="gradient-text">Skip the noise.</span></h1>
    <p class="tagline">The most comprehensive investor intelligence tool for founders. Search <span id="investorCountHero">150+</span> investors by stage, sector, check size, and more.</p>
    <div class="hero-ctas">
      <button class="btn-primary" onclick="showSection('search')">Start Searching ‚Üí</button>
    </div>
    <p class="hero-browse"><a href="#search" onclick="showSection('search');clearAllFilters()">Browse All Investors ‚Üí</a></p>
  </div>
</section>

<!-- SEARCH -->
<main id="search-section" role="main" aria-label="Investor search">
  <div class="container">
    <div class="onboarding-banner" id="onboardingBanner">
      <div class="onboarding-header" onclick="toggleOnboarding()">
        <h3>üí° How it works</h3>
        <button class="onboarding-dismiss" onclick="event.stopPropagation();dismissOnboarding()">Dismiss ‚úï</button>
      </div>
      <div class="onboarding-body">
        <div class="onboarding-step"><div class="step-icon">üîç</div><div class="step-title">Search & Filter</div><div class="step-desc">Search by name, firm, sector, or thesis. Use filters to narrow by stage, check size, geography, and type.</div></div>
        <div class="onboarding-step"><div class="step-icon">üìã</div><div class="step-title">Save & Organize</div><div class="step-desc">Save investors to named lists. Compare up to 3 side-by-side. Export your lists as CSV for outreach.</div></div>
        <div class="onboarding-step"><div class="step-icon">ü§ù</div><div class="step-title">Connect</div><div class="step-desc">View detailed profiles with thesis, portfolio, and links. Share profiles with your co-founders or advisors.</div></div>
      </div>
    </div>

    <div class="search-bar" role="search">
      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.35-4.35"/></svg>
      <input type="search" id="searchInput" placeholder="Search by name, firm, sector, stage, location..." aria-label="Search investors" autocomplete="off">
      <button class="clear-btn" id="clearSearch" onclick="clearSearch()" aria-label="Clear search">√ó</button>
    </div>

    <button class="analytics-toggle" onclick="toggleAnalytics()" aria-expanded="false" aria-controls="analyticsPanel">
      <span class="chevron" id="analyticsChevron" aria-hidden="true">‚ñ∂</span>
      <span>üìä Database Analytics</span>
    </button>
    <div class="analytics-panel" id="analyticsPanel" role="region" aria-label="Database analytics">
      <div class="stats-counters" id="statsCounters"></div>
      <div class="analytics-grid" id="analyticsGrid"></div>
    </div>

    <div class="filters" role="group" aria-label="Investor filters">
      <div class="filter-row" role="group" aria-label="Stage filter">
        <span class="filter-label" id="filter-label-stage">Stage</span>
        <button class="chip" data-filter="stage" data-value="Pre-Seed">Pre-Seed</button>
        <button class="chip" data-filter="stage" data-value="Seed">Seed</button>
        <button class="chip" data-filter="stage" data-value="Series A">Series A</button>
        <button class="chip" data-filter="stage" data-value="Series B">Series B</button>
        <button class="chip" data-filter="stage" data-value="Growth">Growth</button>
      </div>
      <div class="filter-row" role="group" aria-label="Sector filter">
        <span class="filter-label" id="filter-label-sector">Sector</span>
        <button class="chip" data-filter="sector" data-value="SaaS">SaaS</button>
        <button class="chip" data-filter="sector" data-value="Fintech">Fintech</button>
        <button class="chip" data-filter="sector" data-value="HealthTech">HealthTech</button>
        <button class="chip" data-filter="sector" data-value="AI/ML">AI/ML</button>
        <button class="chip" data-filter="sector" data-value="Consumer">Consumer</button>
        <button class="chip" data-filter="sector" data-value="Enterprise">Enterprise</button>
        <button class="chip" data-filter="sector" data-value="Climate">Climate</button>
        <button class="chip" data-filter="sector" data-value="Crypto">Crypto</button>
        <button class="chip" data-filter="sector" data-value="Biotech">Biotech</button>
        <button class="chip" data-filter="sector" data-value="DeepTech">DeepTech</button>
      </div>
      <div class="filter-row" role="group" aria-label="Check size filter">
        <span class="filter-label">Check Size</span>
        <input type="range" id="checkMin" min="0" max="25000000" step="100000" value="0" aria-label="Minimum check size">
        <input type="range" id="checkMax" min="0" max="25000000" step="100000" value="25000000" aria-label="Maximum check size">
        <span class="range-display" id="checkDisplay" aria-live="polite">$0 ‚Äì $25M+</span>
      </div>
      <div class="filter-row" role="group" aria-label="Investor type filter">
        <span class="filter-label">Type</span>
        <button class="chip" data-filter="type" data-value="VC">VC</button>
        <button class="chip" data-filter="type" data-value="Angel">Angel</button>
        <button class="chip" data-filter="type" data-value="Family Office">Family Office</button>
        <button class="chip" data-filter="type" data-value="Corp VC">Corp VC</button>
        <button class="chip" data-filter="type" data-value="Angel Group">Angel Group</button>
      </div>
      <div class="filter-row" role="group" aria-label="Entity type filter">
        <span class="filter-label">Entity</span>
        <button class="chip" data-filter="entity" data-value="individual">Individuals</button>
        <button class="chip" data-filter="entity" data-value="organization">Organizations</button>
      </div>
      <div class="filter-row" role="group" aria-label="Geography filter">
        <span class="filter-label">Geography</span>
        <button class="chip" data-filter="geo" data-value="US">US</button>
        <button class="chip" data-filter="geo" data-value="EU">EU</button>
        <button class="chip" data-filter="geo" data-value="Asia">Asia</button>
        <button class="chip" data-filter="geo" data-value="Global">Global</button>
      </div>
      <div class="filter-row" role="group" aria-label="Activity filter">
        <span class="filter-label">Activity</span>
        <select id="activityFilter" onchange="renderResults()" aria-label="Filter by activity recency">
          <option value="any">Any time</option>
          <option value="3">Last 3 months</option>
          <option value="6">Last 6 months</option>
          <option value="12">Last 12 months</option>
        </select>
      </div>
      <div class="filter-row" role="group" aria-label="Sort order">
        <span class="filter-label">Sort</span>
        <select id="sortSelect" onchange="renderResults()" aria-label="Sort investors by">
          <option value="relevance">Relevance</option>
          <option value="nameAZ">Name A ‚Üí Z</option>
          <option value="nameZA">Name Z ‚Üí A</option>
          <option value="recent">Recent Activity</option>
          <option value="checkSize">Check Size (High ‚Üí Low)</option>
          <option value="checkSizeAsc">Check Size (Low ‚Üí High)</option>
          <option value="location">Location</option>
        </select>
      </div>
    </div>

    <div class="results-info" aria-live="polite">
      <span><span id="resultsCount" role="status">0 investors</span><span id="filterBadge" class="filter-badge"></span><button id="clearFiltersBtn" class="clear-filters-btn" onclick="clearAllFilters()" style="display:none" aria-label="Clear all filters">Clear Filters ‚úï</button></span>
    </div>
    <div class="results-grid" id="resultsGrid" role="list" aria-label="Investor results"></div>
  </div>
</main>

<!-- SAVED -->
<section id="saved-section" aria-label="Saved investors">
  <div class="container">
    <h2>Investor Lists</h2>
    <p class="subtitle">Organize your investors into named lists for outreach. Right-click a tab to rename or delete.</p>
    <div class="list-tabs" id="listTabs"></div>
    <div class="saved-header-row">
      <span class="saved-list-info" id="savedListInfo"></span>
      <div class="saved-actions" id="savedActions" style="margin-bottom:0">
        <button class="btn-secondary" onclick="exportCSV()" style="padding:8px 16px;font-size:0.82rem">‚Üì Export CSV</button>
        <button class="btn-secondary" onclick="clearCurrentList()" style="padding:8px 16px;font-size:0.82rem">Clear</button>
      </div>
    </div>
    <div class="results-grid" id="savedGrid"></div>
    <div class="saved-empty" id="savedEmpty">No saved investors yet. Browse and save investors you're interested in.</div>
  </div>
</section>

<!-- COMPARE BAR -->
<div class="compare-bar" id="compareBar" role="region" aria-label="Compare investors toolbar">
  <div class="compare-bar-inner">
    <div class="avatars" id="compareAvatars"></div>
    <div class="bar-actions">
      <span class="compare-count" id="compareCount"></span>
      <button class="btn-primary" onclick="openCompare()" id="compareBtn" style="padding:10px 24px">Compare ‚Üí</button>
      <button class="btn-secondary" onclick="clearCompare()" style="padding:10px 14px;font-size:0.8rem">Clear</button>
    </div>
  </div>
</div>

<!-- COMPARE MODAL -->
<div class="modal-overlay" id="compareOverlay" onclick="if(event.target===this)closeCompare()" role="dialog" aria-modal="true" aria-label="Investor comparison">
  <div class="compare-modal" id="compareModal"></div>
</div>

<!-- MODAL -->
<div class="modal-overlay" id="modalOverlay" onclick="if(event.target===this)closeModal()" role="dialog" aria-modal="true" aria-label="Investor profile">
  <div class="modal" id="modal"></div>
</div>

<!-- FOOTER -->
<footer role="contentinfo">
  <div class="inner">
    <div class="left">Built by <a href="https://ralcorn.com" target="_blank">Ralcorn Consulting</a> ¬∑ Data sourced from public records</div>
    <div class="links">
      <a href="mailto:hello@matchcapital.ai">Contact</a>
    </div>
  </div>
</footer>

<script>
// ===== SAMPLE DATA (fallback) =====
const SAMPLE_DATA=[];

let investors=[];
let activeFilters={stage:[],sector:[],type:[],geo:[],entity:[]};
const PAGE_SIZE=24;
let displayedCount=PAGE_SIZE;
let lastFiltered=[];

// ===== NAMED LISTS =====
function loadLists(){
  let lists=JSON.parse(localStorage.getItem('mc_lists')||'null');
  if(!lists){
    // Migrate from old mc_saved
    const old=JSON.parse(localStorage.getItem('mc_saved')||'[]');
    lists={Saved:old};
    localStorage.setItem('mc_lists',JSON.stringify(lists));
  }
  return lists;
}
let namedLists=loadLists();
let currentListName=Object.keys(namedLists)[0]||'Saved';

function saveLists(){localStorage.setItem('mc_lists',JSON.stringify(namedLists))}
function allSavedIds(){const s=new Set();Object.values(namedLists).forEach(l=>l.forEach(id=>s.add(id)));return s}
function listsForInvestor(id){return Object.entries(namedLists).filter(([,ids])=>ids.includes(id)).map(([n])=>n)}

// ===== COMPARE =====
let compareIds=[];

// ===== DATA NORMALIZATION =====
const STAGE_MAP={seed:'Seed','pre-seed':'Pre-Seed','pre_seed':'Pre-Seed',series_a:'Series A',series_b:'Series B',growth:'Growth'};
const SECTOR_MAP={saas:'SaaS',fintech:'Fintech',healthtech:'HealthTech',ai_ml:'AI/ML',consumer:'Consumer',enterprise:'Enterprise',climate:'Climate',crypto:'Crypto',biotech:'Biotech',deeptech:'DeepTech',edtech:'EdTech',hardware:'Hardware',marketplace:'Marketplace'};
const TYPE_MAP={vc:'VC',angel:'Angel',family_office:'Family Office',corp_vc:'Corp VC',angel_group:'Angel Group'};
const GEO_MAP={us:'US',eu:'EU',asia:'Asia',global:'Global'};

function normalizeInvestor(inv){
  inv.stages=(inv.stages||[]).map(s=>STAGE_MAP[s]||s);
  inv.sectors=(inv.sectors||[]).map(s=>SECTOR_MAP[s]||s);
  inv.type=TYPE_MAP[inv.type]||inv.type;
  inv.geography=(inv.geography||[]).map(g=>GEO_MAP[g]||g);
  // Normalize links
  if(!inv.links){
    inv.links={
      linkedin:inv.linkedIn||inv.linkedin||null,
      twitter:inv.twitter?(/^http/.test(inv.twitter)?inv.twitter:'https://twitter.com/'+inv.twitter.replace('@','')):null,
      website:inv.firmUrl||inv.website||null
    };
  }
  if(!inv.fundStatus)inv.fundStatus=inv.activelyDeploying?'Actively Deploying':'Unknown';
  if(!inv.title)inv.title=inv.type;
  return inv;
}

// ===== INIT =====
async function init(){
  // Show loading skeleton
  const grid=document.getElementById('resultsGrid');
  grid.innerHTML=Array(6).fill('<div class="skeleton-card"><div class="skeleton-circle"></div><div class="skeleton-line w60"></div><div class="skeleton-line w40"></div><div class="skeleton-line w80"></div><div class="skeleton-line w60"></div></div>').join('');
  try{const r=await fetch('data/investors.json');if(r.ok)investors=(await r.json()).map(normalizeInvestor);else throw new Error('Fetch failed')}catch(e){investors=[];grid.innerHTML='<div class="no-results"><div class="no-results-icon">‚ö†Ô∏è</div>Failed to load investor data.<div class="no-results-hint">Please refresh the page or try again later.</div></div>';return}
  updateSavedCount();
  document.getElementById('investorCountHero').textContent=investors.length;
  handleHash();
  renderResults();
}

// ===== ROUTING =====
function handleHash(){
  const h=location.hash;
  if(h.startsWith('#profile/')){showSection('search');openProfileById(h.split('/')[1])}
  else if(h==='#saved')showSection('saved');
  else if(h==='#search')showSection('search');
  else showSection('hero');
}
window.addEventListener('hashchange',handleHash);

function showSection(s){
  document.getElementById('hero').style.display=s==='hero'?'':'none';
  document.getElementById('search-section').style.display=(s==='search')?'':'none';
  document.getElementById('saved-section').style.display=s==='saved'?'':'none';
  if(s==='saved')renderSaved();
  if(s==='search')document.getElementById('search-section').scrollIntoView({behavior:'smooth'});
  // Update nav active state
  document.querySelectorAll('.nav-links a, .nav-links button').forEach(el=>el.classList.remove('nav-active'));
  const navMap={hero:0,search:1,saved:2};
  const navEls=document.querySelectorAll('.nav-links a, .nav-links button');
  if(navEls[navMap[s]])navEls[navMap[s]].classList.add('nav-active');
}

// ===== FORMAT =====
function fmt(n){if(n>=1e6)return'$'+Math.round(n/1e6)+'M';if(n>=1e3)return'$'+Math.round(n/1e3)+'K';return'$'+n}
function initials(name){return name.split(' ').map(w=>w[0]).join('')}
function typeClass(t){return'type-'+t.toLowerCase().replace(/\s+/g,'-')}

// ===== FILTERS =====
document.querySelectorAll('.chip[data-filter]').forEach(c=>{
  c.setAttribute('role','checkbox');
  c.setAttribute('aria-checked','false');
  c.addEventListener('click',()=>{
    const f=c.dataset.filter,v=c.dataset.value;
    c.classList.toggle('active');
    const isActive=c.classList.contains('active');
    c.setAttribute('aria-checked',isActive);
    if(isActive)activeFilters[f].push(v);
    else activeFilters[f]=activeFilters[f].filter(x=>x!==v);
    renderResults();
  });
});

const checkMin=document.getElementById('checkMin'),checkMax=document.getElementById('checkMax'),checkDisplay=document.getElementById('checkDisplay');
function updateCheckDisplay(){checkDisplay.textContent=fmt(+checkMin.value)+' ‚Äì '+fmt(+checkMax.value)+(+checkMax.value>=25e6?'+':'')}
checkMin.addEventListener('input',()=>{if(+checkMin.value>+checkMax.value)checkMax.value=checkMin.value;updateCheckDisplay();renderResults()});
checkMax.addEventListener('input',()=>{if(+checkMax.value<+checkMin.value)checkMin.value=checkMax.value;updateCheckDisplay();renderResults()});

// ===== SEARCH =====
const searchInput=document.getElementById('searchInput'),clearBtn=document.getElementById('clearSearch');
let debounceTimer;
searchInput.addEventListener('input',()=>{clearBtn.classList.toggle('show',searchInput.value.length>0);clearTimeout(debounceTimer);debounceTimer=setTimeout(renderResults,200)});
function clearSearch(){searchInput.value='';clearBtn.classList.remove('show');renderResults()}

// ===== RENDER =====
function filterInvestors(){
  const q=searchInput.value.toLowerCase();
  const cMin=+checkMin.value,cMax=+checkMax.value;
  const actMonths=document.getElementById('activityFilter').value;
  return investors.filter(inv=>{
    if(q){
      const fields=[inv.name,inv.firm,inv.thesis,inv.location,...inv.sectors,...inv.stages,...inv.geography,inv.type].map(s=>(s||'').toLowerCase());
      const words=q.split(/\s+/);
      const match=words.every(w=>fields.some(f=>f.includes(w)));
      if(!match){
        // Fuzzy: allow 1-char typos for words > 3 chars
        const fuzzy=words.every(w=>{
          if(w.length<=3)return fields.some(f=>f.includes(w));
          return fields.some(f=>{
            for(let i=0;i<=f.length-w.length;i++){
              let diff=0;
              for(let j=0;j<w.length;j++){if(f[i+j]!==w[j])diff++;if(diff>1)break}
              if(diff<=1)return true;
            }
            return false;
          });
        });
        if(!fuzzy)return false;
      }
    }
    if(activeFilters.stage.length&&!activeFilters.stage.some(s=>inv.stages.includes(s)))return false;
    if(activeFilters.sector.length&&!activeFilters.sector.some(s=>inv.sectors.includes(s)))return false;
    if(activeFilters.type.length&&!activeFilters.type.includes(inv.type))return false;
    if(activeFilters.geo.length&&!activeFilters.geo.some(g=>inv.geography.includes(g)))return false;
    if(activeFilters.entity.length&&!activeFilters.entity.includes(inv.entity))return false;
    if(inv.checkSize.max<cMin||inv.checkSize.min>cMax)return false;
    if(actMonths!=='any'&&inv.lastActive){
      const cutoff=new Date();cutoff.setMonth(cutoff.getMonth()-parseInt(actMonths));
      const lastAct=new Date(inv.lastActive);
      if(lastAct<cutoff)return false;
    }
    return true;
  });
}

function sortInvestors(list){
  const s=document.getElementById('sortSelect').value;
  if(s==='recent')return[...list].sort((a,b)=>new Date(b.lastActive)-new Date(a.lastActive));
  if(s==='checkSize')return[...list].sort((a,b)=>b.checkSize.max-a.checkSize.max);
  if(s==='checkSizeAsc')return[...list].sort((a,b)=>a.checkSize.min-b.checkSize.min);
  if(s==='nameAZ')return[...list].sort((a,b)=>a.name.localeCompare(b.name));
  if(s==='nameZA')return[...list].sort((a,b)=>b.name.localeCompare(a.name));
  if(s==='location')return[...list].sort((a,b)=>(a.location||'').localeCompare(b.location||''));
  return list;
}

function getActiveFilterCount(){
  let count=Object.values(activeFilters).reduce((a,b)=>a+b.length,0);
  if(+checkMin.value>0||+checkMax.value<25e6)count++;
  if(document.getElementById('activityFilter').value!=='any')count++;
  return count;
}

function renderResults(append){
  const filtered=sortInvestors(filterInvestors());
  lastFiltered=filtered;
  if(!append){displayedCount=PAGE_SIZE;kbFocusIndex=-1;}
  const showing=Math.min(displayedCount,filtered.length);
  document.getElementById('resultsCount').textContent='Showing '+showing+' of '+filtered.length+' investor'+(filtered.length!==1?'s':'');
  const fc=getActiveFilterCount();
  const badge=document.getElementById('filterBadge');
  const clearBtn=document.getElementById('clearFiltersBtn');
  badge.textContent=fc?' ('+fc+' filter'+(fc>1?'s':'')+' active)':'';
  clearBtn.style.display=fc?'inline-block':'none';
  const grid=document.getElementById('resultsGrid');
  if(!filtered.length){grid.innerHTML='<div class="no-results"><div class="no-results-icon">üîç</div>No investors match your filters.<div class="no-results-hint">Try removing some filters or broadening your search terms.<br><button class="btn-secondary" onclick="clearAllFilters()" style="margin-top:12px;padding:8px 20px">Clear All Filters</button></div></div>';return}
  const page=filtered.slice(0,showing);
  grid.innerHTML=page.map((inv,i)=>cardHTML(inv,i)).join('');
  if(showing<filtered.length){
    grid.innerHTML+='<div style="grid-column:1/-1;text-align:center;padding:24px 0"><button class="btn-secondary" onclick="loadMore()" style="padding:12px 32px">Load More ('+Math.min(PAGE_SIZE,filtered.length-showing)+' more)</button></div>';
  }
}
function loadMore(){
  displayedCount+=PAGE_SIZE;
  renderResults(true);
}

function clearAllFilters(){
  activeFilters={stage:[],sector:[],type:[],geo:[],entity:[]};
  document.querySelectorAll('.chip.active').forEach(c=>c.classList.remove('active'));
  checkMin.value=0;checkMax.value=25e6;updateCheckDisplay();
  document.getElementById('activityFilter').value='any';
  searchInput.value='';clearBtn.classList.remove('show');
  renderResults();
}

function cardHTML(inv,idx){
  const isCompared=compareIds.includes(inv.id);
  const sectorTags=inv.sectors.slice(0,3).map(s=>`<span class="tag-sector">${s}</span>`).join('');
  const overflow=inv.sectors.length>3?`<span class="tag-overflow">+${inv.sectors.length-3}</span>`:'';
  const delay=Math.min((idx||0)*0.05,0.8);
  const isOrg=inv.entity==='organization';
  const avatarClass=isOrg?'avatar avatar-org':'avatar';
  const avatarContent=isOrg?'üè¢':initials(inv.name);
  const firmLine=isOrg?(inv.memberCount?`<div class="firm"><span class="member-count-badge">üë• ${inv.memberCount} members</span></div>`:''):`<div class="firm">${inv.firm||''}</div>`;
  return`<div class="investor-card" onclick="openProfile('${inv.id}')" style="animation-delay:${delay}s" role="listitem" tabindex="0" aria-label="${inv.name}, ${inv.firm||inv.type}, ${inv.stages.join(', ')}" data-investor-id="${inv.id}" onkeydown="cardKeyHandler(event,'${inv.id}')">
    <button class="compare-btn ${isCompared?'selected':''}" onclick="event.stopPropagation();toggleCompare('${inv.id}')" aria-label="${isCompared?'Remove '+inv.name+' from comparison':'Add '+inv.name+' to comparison'}" aria-pressed="${isCompared}">
      ${isCompared?'‚úì':'Ôºã'}
    </button>
    <div class="card-header">
      <div class="${avatarClass}">${avatarContent}</div>
      ${inv.activelyDeploying?'<div class="active-badge"><span class="dot"></span>Active</div>':''}
    </div>
    <div class="name">${inv.name}</div>
    ${firmLine}
    <div class="sector-tags">${sectorTags}${overflow}</div>
    <span class="type-badge ${typeClass(inv.type)}">${inv.type}</span>
    <div class="card-thesis">${inv.thesis}</div>
    <div class="tags">
      ${inv.stages.map(s=>`<span class="tag tag-stage">${s}</span>`).join('')}
    </div>
    <div class="check-size">üí∞ ${fmt(inv.checkSize.min)} ‚Äì ${fmt(inv.checkSize.max)}</div>
    <div class="location">${inv.location}</div>
  </div>`
}

// ===== PROFILE MODAL =====
function openProfileById(id){const inv=investors.find(i=>i.id===id);if(inv)openProfile(id)}

function getActivityStatus(lastActive){
  if(!lastActive)return{color:'gray',label:'Unknown'};
  const now=new Date(),last=new Date(lastActive);
  const months=(now-last)/(1000*60*60*24*30);
  if(months<=3)return{color:'green',label:'Active recently'};
  if(months<=6)return{color:'yellow',label:'Active 3-6mo ago'};
  return{color:'gray',label:'6+ months ago'};
}

function getPortfolioCount(inv){
  const all=new Set();
  (inv.recentInvestments||[]).forEach(i=>all.add(i.company));
  (inv.portfolioHighlights||[]).forEach(p=>{const name=p.replace(/\s*\(.*\)/,'').trim();all.add(name)});
  return all.size;
}

function isVerified(inv){return !!(inv.links.linkedin && inv.links.website)}

function findSimilarInvestors(inv){
  return investors.map(other=>{
    if(other.id===inv.id)return null;
    const stageOverlap=inv.stages.filter(s=>other.stages.includes(s));
    const sectorOverlap=inv.sectors.filter(s=>other.sectors.includes(s));
    const score=stageOverlap.length+sectorOverlap.length;
    if(score<2)return null;
    return{...other,_score:score,_overlap:[...sectorOverlap,...stageOverlap]};
  }).filter(Boolean).sort((a,b)=>b._score-a._score).slice(0,4);
}

function toggleModalListDropdown(e,id){
  e.stopPropagation();
  const dd=document.getElementById('modalListDD-'+id);
  dd.classList.toggle('show');
  if(dd.classList.contains('show'))renderModalListDD(dd,id);
}
function renderModalListDD(dd,investorId){
  dd.innerHTML=Object.keys(namedLists).map(name=>{
    const isIn=(namedLists[name]||[]).includes(investorId);
    return`<label class="modal-list-dd-item" onclick="event.stopPropagation()"><input type="checkbox" ${isIn?'checked':''} onchange="toggleInListDD('${investorId}','${name.replace(/'/g,"\\'")}')"> ${name}</label>`;
  }).join('');
}
function toggleInListDD(investorId,listName){
  if(!namedLists[listName])namedLists[listName]=[];
  const list=namedLists[listName];
  const idx=list.indexOf(investorId);
  if(idx>=0)list.splice(idx,1);else list.push(investorId);
  saveLists();updateSavedCount();
}

function openProfile(id){
  location.hash='profile/'+id;
  const inv=investors.find(i=>i.id===id);if(!inv)return;
  const activity=getActivityStatus(inv.lastActive);
  const portfolioCount=getPortfolioCount(inv);
  const verified=false;
  const similar=findSimilarInvestors(inv);

  const isOrg=inv.entity==='organization';
  const modalAvatarClass=isOrg?'modal-avatar avatar-org':'modal-avatar';
  const modalAvatarContent=isOrg?'üè¢':initials(inv.name);
  const firmLine=isOrg?(inv.title?`<div class="firm">${inv.title}</div>`:''):`<div class="firm">${inv.title} ¬∑ ${inv.firm}</div>`;
  document.getElementById('modal').innerHTML=`
    <button class="modal-close" onclick="closeModal()" aria-label="Close profile">√ó</button>
    <div class="modal-header">
      <div class="${modalAvatarClass}">${modalAvatarContent}</div>
      <div class="modal-header-info">
        <h2>${inv.name}${verified?'<span class="verified-badge">‚úì Verified</span>':''}</h2>
        ${firmLine}
        <div class="badges">
          <span class="type-badge ${typeClass(inv.type)}">${inv.type}</span>
          <span style="display:flex;align-items:center;gap:5px;font-size:0.8rem;color:var(--text-muted)"><span class="activity-dot ${activity.color}"></span>${activity.label}</span>
        </div>
        <div style="display:flex;gap:8px;margin-top:10px;align-items:center">
          <div class="modal-list-dropdown">
            <button class="btn-secondary" style="padding:8px 14px;font-size:0.82rem" onclick="toggleModalListDropdown(event,'${id}')">üìã Add to List</button>
            <div class="modal-list-dd-content" id="modalListDD-${id}"></div>
          </div>
        </div>
      </div>
    </div>
    <div class="modal-body">
      <div class="social-proof">
        <div class="proof-item">üìä <span class="proof-val">${portfolioCount}</span> portfolio companies</div>
        <div class="proof-item">üí∞ <span class="proof-val">${fmt(inv.checkSize.min)}‚Äì${fmt(inv.checkSize.max)}</span> checks</div>
        <div class="proof-item">üåç ${inv.geography.join(', ')}</div>
        ${inv.activelyDeploying?'<div class="proof-item" style="color:var(--green)">üü¢ Actively Deploying</div>':''}
      </div>

      ${isOrg&&(inv.keyPeople&&inv.keyPeople.length||inv.memberCount)?`
      <div class="modal-section">
        ${inv.memberCount?`<div style="margin-bottom:8px"><span class="member-count-badge">üë• ${inv.memberCount} members</span></div>`:''}
        ${inv.keyPeople&&inv.keyPeople.length?`<h3>Key People</h3><ul class="key-people-list">${inv.keyPeople.map(p=>'<li>'+p+'</li>').join('')}</ul>`:''}
      </div>`:''}

      <div class="modal-section"><h3>Investment Thesis</h3><p>${inv.thesis}</p></div>

      <hr class="modal-divider">

      <div class="profile-grid">
        <div class="profile-col">
          <div class="modal-section"><h3>Focus Areas</h3>
            <div class="modal-tags">
              ${inv.stages.map(s=>`<span class="tag tag-stage">${s}</span>`).join('')}
              ${inv.sectors.map(s=>`<span class="tag tag-sector">${s}</span>`).join('')}
              ${inv.geography.map(g=>`<span class="tag">${g}</span>`).join('')}
            </div>
          </div>
          <div class="modal-section"><h3>Check Size</h3><p style="font-size:1.1rem;font-weight:600;color:var(--text)">${fmt(inv.checkSize.min)} ‚Äì ${fmt(inv.checkSize.max)}</p></div>
          <div class="modal-section"><h3>Portfolio Highlights</h3>
            <div class="modal-tags">${inv.portfolioHighlights.map(p=>`<span class="tag">${p}</span>`).join('')}</div>
          </div>
          <div class="modal-section"><h3>Links</h3>
            <div class="modal-links-row">
              ${inv.links.linkedin?`<a href="${inv.links.linkedin}" target="_blank" title="LinkedIn">üíº</a>`:''}
              ${inv.links.twitter?`<a href="${inv.links.twitter}" target="_blank" title="Twitter">üê¶</a>`:''}
              ${inv.links.website?`<a href="${inv.links.website}" target="_blank" title="Website">üåê</a>`:''}
            </div>
          </div>
        </div>
        <div class="profile-col">
          <div class="modal-section"><h3>Fund Info</h3>
            <div class="fund-info">
              <div class="fund-info-item"><div class="label">Fund Size</div><div class="value">${inv.fundSize}</div></div>
              <div class="fund-info-item"><div class="label">Status</div><div class="value">${inv.fundStatus}</div></div>
            </div>
          </div>
          <div class="modal-section"><h3>Recent Investments</h3>
            <ul class="investment-list">
              ${inv.recentInvestments.map(i=>`<li><span class="company">${i.company}</span><span class="round-year">${i.round} ¬∑ ${i.year}</span></li>`).join('')}
            </ul>
          </div>
        </div>
      </div>

      ${similar.length?`
      <hr class="modal-divider">
      <div class="modal-section"><h3>Similar Investors</h3>
        <div class="similar-grid">
          ${similar.map(s=>{
            const overlap=s._overlap.slice(0,3).join(', ');
            return`<div class="similar-card" onclick="closeModal();setTimeout(()=>openProfile('${s.id}'),200)">
              <div class="sim-avatar">${initials(s.name)}</div>
              <div class="sim-name">${s.name}</div>
              <div class="sim-firm">${s.firm||''}</div>
              <div class="sim-overlap">${overlap}</div>
              <span class="sim-link">View Profile ‚Üí</span>
            </div>`}).join('')}
        </div>
      </div>`:''}

      <hr class="modal-divider">
      <div class="modal-section"><h3>Share</h3>
        <div class="share-buttons">
          <button class="share-btn" onclick="copyProfileLink(this,'${inv.id}')">üìã Copy Link</button>
          <button class="share-btn" onclick="shareOnTwitter('${inv.name.replace(/'/g,"\\'")}','${inv.id}')">ùïè Share on X</button>
        </div>
      </div>
      <div style="text-align:center;margin-top:12px">
        <p style="font-size:0.8rem;color:var(--text-dim)">Are you ${inv.name}? <a href="mailto:hello@matchcapital.ai?subject=Claim Profile: ${encodeURIComponent(inv.name)}" style="color:var(--accent)">Claim this profile</a></p>
      </div>
    </div>`;
  const overlay=document.getElementById('modalOverlay');
  overlay.classList.remove('animate-out');
  overlay.classList.add('open');
  document.body.style.overflow='hidden';
  requestAnimationFrame(()=>requestAnimationFrame(()=>{overlay.classList.add('animate-in');const closeBtn=document.querySelector('#modal .modal-close');if(closeBtn)closeBtn.focus()}));
}

function closeModal(){
  const overlay=document.getElementById('modalOverlay');
  overlay.classList.remove('animate-in');
  overlay.classList.add('animate-out');
  setTimeout(()=>{
    overlay.classList.remove('open','animate-out');
    document.body.style.overflow='';
  },300);
  if(location.hash.startsWith('#profile'))history.replaceState(null,'','#search');
}
// ===== KEYBOARD NAVIGATION =====
let kbFocusIndex=-1;

function cardKeyHandler(e,id){
  if(e.key==='Enter'||e.key===' '){e.preventDefault();openProfile(id)}
  if(e.key==='c'||e.key==='C'){e.preventDefault();toggleCompare(id)}
}

function getVisibleCards(){return[...document.querySelectorAll('#resultsGrid .investor-card')]}

function setKbFocus(idx){
  const cards=getVisibleCards();
  if(!cards.length)return;
  // Remove previous
  cards.forEach(c=>c.classList.remove('kb-focused'));
  kbFocusIndex=Math.max(0,Math.min(idx,cards.length-1));
  const card=cards[kbFocusIndex];
  card.classList.add('kb-focused');
  card.focus({preventScroll:false});
  card.scrollIntoView({block:'nearest',behavior:'smooth'});
}

document.addEventListener('keydown',e=>{
  // Escape closes modals/panels
  if(e.key==='Escape'){
    const compareOpen=document.getElementById('compareOverlay').classList.contains('open');
    const modalOpen=document.getElementById('modalOverlay').classList.contains('open');
    if(modalOpen){closeModal();return}
    if(compareOpen){closeCompare();return}
    // Escape from search clears it
    if(document.activeElement===document.getElementById('searchInput')){
      if(searchInput.value){clearSearch()}else{searchInput.blur()}
      return;
    }
  }

  // Arrow key navigation through cards (only when not in input/select/modal)
  const tag=document.activeElement?.tagName;
  const inInput=tag==='INPUT'||tag==='SELECT'||tag==='TEXTAREA';
  const modalOpen=document.getElementById('modalOverlay').classList.contains('open')||document.getElementById('compareOverlay').classList.contains('open');
  if(modalOpen)return;

  const cards=getVisibleCards();
  if(!cards.length)return;

  if(e.key==='ArrowRight'||e.key==='ArrowDown'){
    if(inInput&&e.key==='ArrowDown'&&tag!=='SELECT'){}else if(!inInput){
      e.preventDefault();
      setKbFocus(kbFocusIndex+1);
    }
  }
  if(e.key==='ArrowLeft'||e.key==='ArrowUp'){
    if(!inInput){
      e.preventDefault();
      setKbFocus(kbFocusIndex-1);
    }
  }
  // Slash to focus search
  if(e.key==='/'&&!inInput){
    e.preventDefault();
    document.getElementById('searchInput').focus();
  }
});

// ===== SAVE DROPDOWN =====
function toggleSaveDropdown(e,id){
  e.stopPropagation();
  const dd=document.getElementById('saveDropdown-'+id);
  if(dd.style.display==='none'){renderSaveDropdown(dd,id);dd.style.display='block'}
  else dd.style.display='none';
}
function renderSaveDropdown(dd,investorId){
  const inLists=listsForInvestor(investorId);
  dd.innerHTML=Object.keys(namedLists).map(name=>{
    const isIn=inLists.includes(name);
    return`<div class="save-dropdown-item ${isIn?'in-list':''}" onclick="event.stopPropagation();toggleInList('${investorId}','${name.replace(/'/g,"\\'")}',this.parentElement)">${isIn?'‚úì ':''} ${name}</div>`;
  }).join('')+`<div class="save-dropdown-item create" onclick="event.stopPropagation();showNewListInput(this.parentElement,'${investorId}')">+ Create new list</div>`;
}
function toggleInList(investorId,listName,dd){
  if(!namedLists[listName])namedLists[listName]=[];
  const list=namedLists[listName];
  const idx=list.indexOf(investorId);
  if(idx>=0)list.splice(idx,1);else list.push(investorId);
  saveLists();updateSavedCount();renderSaveDropdown(dd,investorId);
}
function showNewListInput(dd,investorId){
  // Remove existing input if any
  const existing=dd.querySelector('.new-list-input');if(existing)return existing.focus();
  const input=document.createElement('input');input.className='new-list-input';input.placeholder='List name...';
  dd.appendChild(input);input.focus();
  input.addEventListener('keydown',e=>{
    if(e.key==='Enter'&&input.value.trim()){
      const name=input.value.trim();
      if(!namedLists[name])namedLists[name]=[];
      namedLists[name].push(investorId);
      saveLists();updateSavedCount();renderSaveDropdown(dd,investorId);
    }
    if(e.key==='Escape'){input.remove()}
  });
}
// Close dropdowns on outside click
document.addEventListener('click',()=>{document.querySelectorAll('.save-dropdown').forEach(d=>d.style.display='none')});

function updateSavedCount(){
  const total=allSavedIds().size;
  document.getElementById('savedCount').textContent=total;
}

// ===== RENDER SAVED / LISTS =====
function renderSaved(){
  renderListTabs();
  const ids=namedLists[currentListName]||[];
  const saved=investors.filter(i=>ids.includes(i.id));
  const grid=document.getElementById('savedGrid');
  const empty=document.getElementById('savedEmpty');
  const info=document.getElementById('savedListInfo');
  info.textContent=saved.length?saved.length+' investor'+(saved.length!==1?'s':'')+' in "'+currentListName+'"':'';
  if(!saved.length){grid.innerHTML='';empty.style.display='';empty.textContent='No investors in "'+currentListName+'" yet. Browse and save investors to get started.';return}
  empty.style.display='none';
  grid.innerHTML=saved.map((inv,i)=>savedCardHTML(inv,i)).join('');
}
function savedCardHTML(inv,idx){
  // Like cardHTML but with move/remove controls
  let html=cardHTML(inv,idx);
  // Inject move button after compare-btn
  const moveBtn=`<div class="card-move-btn" onclick="event.stopPropagation();toggleCardMoveMenu(this,'${inv.id}')">‚áÑ Lists</div>`;
  html=html.replace('</button>\n    <div class="card-header">',`</button>\n    ${moveBtn}\n    <div class="card-header">`);
  return html;
}
function toggleCardMoveMenu(btn,investorId){
  // Close any open menus
  document.querySelectorAll('.card-move-menu').forEach(m=>m.remove());
  const menu=document.createElement('div');
  menu.className='card-move-menu';
  const lists=Object.keys(namedLists);
  menu.innerHTML=lists.map(name=>{
    const isIn=(namedLists[name]||[]).includes(investorId);
    return`<div class="card-move-menu-item ${isIn?'in-list':''}" onclick="event.stopPropagation();toggleInListAndRefresh('${investorId}','${name.replace(/'/g,"\\'")}')">
      ${isIn?'‚úì':'‚óã'} ${name}</div>`;
  }).join('')+`<div class="card-move-menu-item remove" onclick="event.stopPropagation();removeFromCurrentList('${investorId}')">‚úï Remove from "${currentListName}"</div>`;
  btn.style.position='relative';
  btn.appendChild(menu);
  const close=e=>{if(!btn.contains(e.target)){menu.remove();document.removeEventListener('click',close)}};
  setTimeout(()=>document.addEventListener('click',close),0);
}
function toggleInListAndRefresh(investorId,listName){
  if(!namedLists[listName])namedLists[listName]=[];
  const list=namedLists[listName];
  const idx=list.indexOf(investorId);
  if(idx>=0)list.splice(idx,1);else list.push(investorId);
  saveLists();updateSavedCount();renderSaved();
}
function removeFromCurrentList(investorId){
  const list=namedLists[currentListName]||[];
  const idx=list.indexOf(investorId);
  if(idx>=0){list.splice(idx,1);saveLists();updateSavedCount();renderSaved()}
}
function renderListTabs(){
  const tabs=document.getElementById('listTabs');
  tabs.innerHTML=Object.entries(namedLists).map(([name,ids])=>{
    const esc=name.replace(/'/g,"\\'");
    return`<button class="list-tab ${name===currentListName?'active':''}" onclick="currentListName='${esc}';renderSaved()" oncontextmenu="event.preventDefault();showListTabMenu(event,'${esc}')">${name} <span class="count">${ids.length}</span></button>`;
  }).join('')+`<button class="list-tab" onclick="promptNewList()" style="border-style:dashed">+ New List</button>`;
}
function showListTabMenu(e,listName){
  document.querySelectorAll('.list-tab-menu').forEach(m=>m.remove());
  const menu=document.createElement('div');
  menu.className='list-tab-menu';
  menu.style.left=e.pageX+'px';menu.style.top=e.pageY+'px';menu.style.position='fixed';
  let items=`<div class="list-tab-menu-item" onclick="renameList('${listName.replace(/'/g,"\\'")}')">‚úèÔ∏è Rename</div>`;
  items+=`<div class="list-tab-menu-item" onclick="duplicateList('${listName.replace(/'/g,"\\'")}')">üìã Duplicate</div>`;
  if(listName!=='Saved')items+=`<div class="list-tab-menu-item danger" onclick="deleteNamedList('${listName.replace(/'/g,"\\'")}')">üóë Delete</div>`;
  menu.innerHTML=items;
  document.body.appendChild(menu);
  const close=()=>{menu.remove();document.removeEventListener('click',close)};
  setTimeout(()=>document.addEventListener('click',close),0);
}
function renameList(oldName){
  document.querySelectorAll('.list-tab-menu').forEach(m=>m.remove());
  const newName=prompt('Rename "'+oldName+'" to:',oldName);
  if(!newName||!newName.trim()||newName.trim()===oldName)return;
  const trimmed=newName.trim();
  if(namedLists[trimmed]){alert('A list named "'+trimmed+'" already exists.');return}
  // Preserve order
  const entries=Object.entries(namedLists);
  const newLists={};
  entries.forEach(([k,v])=>{newLists[k===oldName?trimmed:k]=v});
  namedLists=newLists;
  if(currentListName===oldName)currentListName=trimmed;
  saveLists();renderSaved();
}
function duplicateList(name){
  document.querySelectorAll('.list-tab-menu').forEach(m=>m.remove());
  let newName=name+' (copy)';let i=2;
  while(namedLists[newName]){newName=name+' (copy '+i+')';i++}
  namedLists[newName]=[...(namedLists[name]||[])];
  saveLists();currentListName=newName;renderSaved();
}
function deleteNamedList(name){
  document.querySelectorAll('.list-tab-menu').forEach(m=>m.remove());
  if(!confirm('Delete list "'+name+'"?'))return;
  delete namedLists[name];saveLists();
  if(currentListName===name)currentListName=Object.keys(namedLists)[0]||'Saved';
  updateSavedCount();renderSaved();
}
function promptNewList(){
  const name=prompt('New list name:');
  if(name&&name.trim()&&!namedLists[name.trim()]){
    namedLists[name.trim()]=[];saveLists();currentListName=name.trim();renderSaved();updateSavedCount();
  }
}

function exportCSV(){
  const ids=namedLists[currentListName]||[];
  const saved=investors.filter(i=>ids.includes(i.id));if(!saved.length)return;
  const rows=[['Name','Title','Firm','Type','Stages','Sectors','Check Min','Check Max','Location','Active','Website']];
  saved.forEach(i=>rows.push([i.name,i.title,i.firm,i.type,i.stages.join('; '),i.sectors.join('; '),i.checkSize.min,i.checkSize.max,i.location,i.activelyDeploying,i.links.website||'']));
  const csv=rows.map(r=>r.map(c=>'"'+(c+'').replace(/"/g,'""')+'"').join(',')).join('\n');
  const blob=new Blob([csv],{type:'text/csv'});const a=document.createElement('a');a.href=URL.createObjectURL(blob);a.download='match-capital-'+currentListName.toLowerCase().replace(/\s+/g,'-')+'.csv';a.click();
}

function clearCurrentList(){
  if(!confirm('Clear all investors from "'+currentListName+'"?'))return;
  namedLists[currentListName]=[];saveLists();updateSavedCount();renderSaved();
}

// ===== COMPARE =====
function toggleCompare(id){
  const idx=compareIds.indexOf(id);
  if(idx>=0)compareIds.splice(idx,1);
  else if(compareIds.length<3)compareIds.push(id);
  else{alert('Maximum 3 investors for comparison');return}
  updateCompareBar();renderResults();
  // Also re-render saved if visible
  if(document.getElementById('saved-section').style.display!=='none')renderSaved();
}
function updateCompareBar(){
  const bar=document.getElementById('compareBar');
  const avatarsEl=document.getElementById('compareAvatars');
  if(!compareIds.length){bar.classList.remove('show');return}
  bar.classList.add('show');
  avatarsEl.innerHTML=compareIds.map(id=>{
    const inv=investors.find(i=>i.id===id);
    return`<div class="mini-chip"><div class="mini-avatar">${initials(inv.name)}</div><span class="mini-name">${inv.name.split(' ')[0]}</span><span class="mini-remove" onclick="event.stopPropagation();toggleCompare('${id}')">‚úï</span></div>`;
  }).join('');
  document.getElementById('compareCount').textContent=compareIds.length+'/3';
}
function clearCompare(){compareIds=[];updateCompareBar();renderResults()}

function allMatch(invs,getter){
  const vals=invs.map(getter);
  const norm=vals.map(v=>Array.isArray(v)?v.slice().sort().join('|'):String(v));
  return norm.every(n=>n===norm[0]);
}
function arrOverlap(invs,getter){
  const sets=invs.map(i=>new Set(getter(i)));
  return[...sets[0]].filter(v=>sets.every(s=>s.has(v)));
}

function openCompare(){
  if(compareIds.length<2){alert('Select at least 2 investors to compare');return}
  const invs=compareIds.map(id=>investors.find(i=>i.id===id));

  function matchClass(invs,getter){return allMatch(invs,getter)?'match':''}
  function tagWithMatch(items,allItems,cls){
    const common=new Set(allItems);
    return items.map(s=>{
      const isMatch=common.has(s);
      return`<span class="tag ${cls}" style="margin:2px">${isMatch?'<span class="match-icon">‚óè</span>':''}${s}</span>`;
    }).join('');
  }

  const stageOverlap=arrOverlap(invs,i=>i.stages);
  const sectorOverlap=arrOverlap(invs,i=>i.sectors);
  const geoOverlap=arrOverlap(invs,i=>i.geography);

  const rows=[
    {label:'Thesis',render:inv=>`<td>${inv.thesis}</td>`},
    {label:'Stages',render:inv=>{const cls=stageOverlap.length?'':'';return`<td>${inv.stages.map(s=>`<span class="tag tag-stage" style="margin:2px">${stageOverlap.includes(s)?'<span class="match-icon">‚óè</span>':''}${s}</span>`).join('')}</td>`}},
    {label:'Sectors',render:inv=>`<td>${inv.sectors.map(s=>`<span class="tag tag-sector" style="margin:2px">${sectorOverlap.includes(s)?'<span class="match-icon">‚óè</span>':''}${s}</span>`).join('')}</td>`},
    {label:'Check Size',render:inv=>`<td class="${matchClass(invs,i=>fmt(i.checkSize.min)+'-'+fmt(i.checkSize.max))}">${fmt(inv.checkSize.min)} ‚Äì ${fmt(inv.checkSize.max)}</td>`},
    {label:'Fund Size',render:inv=>`<td class="${matchClass(invs,i=>i.fundSize)}">${inv.fundSize}</td>`},
    {label:'Location',render:inv=>`<td class="${matchClass(invs,i=>i.location)}">${inv.location}</td>`},
    {label:'Geography',render:inv=>`<td>${inv.geography.map(g=>`<span class="tag" style="margin:2px">${geoOverlap.includes(g)?'<span class="match-icon">‚óè</span>':''}${g}</span>`).join('')}</td>`},
    {label:'Deploying',render:inv=>`<td class="${matchClass(invs,i=>i.activelyDeploying)}">${inv.activelyDeploying?'<span style="color:var(--green)">‚úì Active</span>':'<span style="color:var(--text-dim)">Inactive</span>'}</td>`},
    {label:'Recent Deals',render:inv=>`<td>${inv.recentInvestments.slice(0,4).map(i=>`<div style="margin-bottom:4px">${i.company} <span style="color:var(--text-dim);font-size:0.78rem">${i.round} ¬∑ ${i.year}</span></div>`).join('')}</td>`},
    {label:'Links',render:inv=>`<td>${[inv.links.linkedin?'<a href="'+inv.links.linkedin+'" target="_blank">LinkedIn</a>':null,inv.links.twitter?'<a href="'+inv.links.twitter+'" target="_blank">Twitter</a>':null,inv.links.website?'<a href="'+inv.links.website+'" target="_blank">Website</a>':null].filter(Boolean).join(' ¬∑ ')||'‚Äî'}</td>`}
  ];

  // Similarity summary
  const similarities=[];
  if(stageOverlap.length)similarities.push(stageOverlap.join(', '));
  if(sectorOverlap.length)similarities.push(sectorOverlap.join(', '));
  if(allMatch(invs,i=>i.location))similarities.push(invs[0].location);
  const simHTML=similarities.length?`<div style="margin-bottom:20px;padding:12px 16px;background:rgba(34,197,94,0.06);border:1px solid rgba(34,197,94,0.15);border-radius:var(--radius-sm);font-size:0.82rem;color:var(--text-muted)"><span style="color:var(--green);font-weight:600">‚óè Shared:</span> ${similarities.join(' ¬∑ ')}</div>`:'';

  let html=`<button class="modal-close" onclick="closeCompare()" style="position:absolute;top:16px;right:16px;font-size:1.5rem;color:var(--text-dim);z-index:1;width:36px;height:36px;display:flex;align-items:center;justify-content:center;border-radius:50%">√ó</button>`;
  html+=`<h2 style="margin-bottom:8px;font-size:1.3rem;font-weight:700">Investor Comparison</h2>`;
  html+=`<p style="font-size:0.82rem;color:var(--text-dim);margin-bottom:16px">Comparing ${invs.length} investors ¬∑ <span style="color:var(--green)">‚óè</span> = shared attributes</p>`;
  html+=simHTML;
  html+=`<table class="compare-table"><thead><tr><th></th>`;
  invs.forEach(inv=>{
    const io=inv.entity==='organization';
    html+=`<td class="header-cell"><div class="avatar${io?' avatar-org':''}" style="margin:0 auto;width:48px;height:48px;border-radius:${io?'8px':'50%'};background:linear-gradient(135deg,var(--accent),var(--accent2));display:flex;align-items:center;justify-content:center;font-weight:700;color:#fff">${io?'üè¢':initials(inv.name)}</div><div class="name">${inv.name}</div><div class="firm">${io?(inv.title||''):(inv.firm||'')}</div><span class="type-badge ${typeClass(inv.type)}" style="margin-top:6px">${inv.type}</span><br><button class="compare-remove" onclick="removeFromCompare('${inv.id}')">‚úï Remove</button></td>`;
  });
  html+=`</tr></thead><tbody>`;
  rows.forEach(row=>{
    html+=`<tr><th>${row.label}</th>`;
    invs.forEach(inv=>{html+=row.render(inv)});
    html+=`</tr>`;
  });
  html+=`</tbody></table>`;
  html+=`<div class="compare-export"><button onclick="copyCompareText(this)">üìã Copy as Text</button><button onclick="exportCompareImage()">üì∏ Export as Image</button></div>`;
  document.getElementById('compareModal').innerHTML=html;
  document.getElementById('compareOverlay').classList.add('open');
  document.body.style.overflow='hidden';
}

function copyCompareText(btn){
  const invs=compareIds.map(id=>investors.find(i=>i.id===id));
  const fields=['Name','Firm','Type','Stages','Sectors','Check Size','Fund Size','Location','Geography','Active'];
  let text='INVESTOR COMPARISON\n'+'='.repeat(40)+'\n\n';
  invs.forEach((inv,idx)=>{
    text+=`[${idx+1}] ${inv.name}\n`;
    text+=`Firm: ${inv.firm||'‚Äî'}\nType: ${inv.type}\n`;
    text+=`Stages: ${inv.stages.join(', ')}\nSectors: ${inv.sectors.join(', ')}\n`;
    text+=`Check Size: ${fmt(inv.checkSize.min)} ‚Äì ${fmt(inv.checkSize.max)}\n`;
    text+=`Fund Size: ${inv.fundSize}\nLocation: ${inv.location}\n`;
    text+=`Geography: ${inv.geography.join(', ')}\n`;
    text+=`Active: ${inv.activelyDeploying?'Yes':'No'}\n`;
    text+=`Thesis: ${inv.thesis}\n\n`;
  });
  navigator.clipboard.writeText(text).then(()=>{
    btn.classList.add('copied');btn.innerHTML='‚úì Copied!';
    setTimeout(()=>{btn.classList.remove('copied');btn.innerHTML='üìã Copy as Text'},2000);
  });
}

function exportCompareImage(){
  const modal=document.getElementById('compareModal');
  // Use canvas to render - simple screenshot via html2canvas-like approach
  // Since we can't load external libs, we'll create a styled SVG foreignObject
  const table=modal.querySelector('.compare-table');
  if(!table)return;
  // Fallback: copy as text and notify
  const invs=compareIds.map(id=>investors.find(i=>i.id===id));
  // Build a self-contained HTML doc for rendering
  const styles=document.querySelector('style').textContent;
  const tableHTML=table.outerHTML;
  const blob=new Blob([`<!DOCTYPE html><html><head><meta charset="utf-8"><link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet"><style>${styles}body{background:#09090b;font-family:'Inter',sans-serif;padding:32px;color:#e4e4e7}.compare-table{max-width:100%}</style></head><body><h2 style="color:#e4e4e7;margin-bottom:16px;font-size:1.3rem">Match Capital ‚Äî Investor Comparison</h2>${tableHTML}<p style="color:#52525b;font-size:0.75rem;margin-top:16px">Generated from hq.ralcorporation.com</p></body></html>`],{type:'text/html'});
  const a=document.createElement('a');
  a.href=URL.createObjectURL(blob);
  a.download='match-capital-comparison.html';
  a.click();
  URL.revokeObjectURL(a.href);
}
function removeFromCompare(id){
  compareIds=compareIds.filter(x=>x!==id);
  if(compareIds.length<2){closeCompare();updateCompareBar();renderResults();return}
  openCompare();updateCompareBar();renderResults();
}
function closeCompare(){document.getElementById('compareOverlay').classList.remove('open');document.body.style.overflow=''}

// ===== ANALYTICS =====
function toggleAnalytics(){
  const panel=document.getElementById('analyticsPanel');
  const chevron=document.getElementById('analyticsChevron');
  const toggle=document.querySelector('.analytics-toggle');
  const isOpen=panel.classList.toggle('open');
  chevron.classList.toggle('open',isOpen);
  toggle.setAttribute('aria-expanded',isOpen);
  if(isOpen&&!panel.dataset.rendered){renderAnalytics();panel.dataset.rendered='1'}
}

function renderAnalytics(){
  const total=investors.length;
  // Type breakdown
  const typeCounts={};investors.forEach(i=>{typeCounts[i.type]=(typeCounts[i.type]||0)+1});
  // Stage breakdown
  const stageCounts={};investors.forEach(i=>i.stages.forEach(s=>{stageCounts[s]=(stageCounts[s]||0)+1}));
  // Geo breakdown
  const geoCounts={};investors.forEach(i=>i.geography.forEach(g=>{geoCounts[g]=(geoCounts[g]||0)+1}));
  // Avg check size
  const avgMin=Math.round(investors.reduce((a,i)=>a+i.checkSize.min,0)/total);
  const avgMax=Math.round(investors.reduce((a,i)=>a+i.checkSize.max,0)/total);
  // Active count
  const activeCount=investors.filter(i=>i.activelyDeploying).length;
  // Top locations
  const locCounts={};investors.forEach(i=>{const loc=(i.location||'').split(',')[0].trim();if(loc)locCounts[loc]=(locCounts[loc]||0)+1});
  const topLocs=Object.entries(locCounts).sort((a,b)=>b[1]-a[1]).slice(0,6);

  // Counters
  document.getElementById('statsCounters').innerHTML=`
    <div class="stat-card"><div class="stat-value">${total}</div><div class="stat-label">Total Investors</div></div>
    <div class="stat-card"><div class="stat-value">${activeCount}</div><div class="stat-label">Actively Deploying</div></div>
    <div class="stat-card"><div class="stat-value">${fmt(avgMin)}</div><div class="stat-label">Avg Min Check</div></div>
    <div class="stat-card"><div class="stat-value">${fmt(avgMax)}</div><div class="stat-label">Avg Max Check</div></div>
  `;

  const typeOrder=['VC','Angel','Family Office','Corp VC','Angel Group'];
  const typeColors={'VC':'fill-vc','Angel':'fill-angel','Family Office':'fill-family-office','Corp VC':'fill-corp-vc','Angel Group':'fill-angel-group'};
  const stageOrder=['Pre-Seed','Seed','Series A','Series B','Growth'];

  function barsHTML(data,order,fillClass,maxVal){
    return order.filter(k=>data[k]).map(k=>{
      const pct=Math.round((data[k]/maxVal)*100);
      const cls=typeof fillClass==='object'?fillClass[k]:fillClass;
      return`<div class="bar-row"><span class="bar-label">${k}</span><div class="bar-track"><div class="bar-fill ${cls}" style="width:${pct}%"></div></div><span class="bar-count">${data[k]}</span></div>`;
    }).join('');
  }

  const maxType=Math.max(...Object.values(typeCounts));
  const maxStage=Math.max(...Object.values(stageCounts));
  const geoOrder=Object.keys(geoCounts).sort((a,b)=>geoCounts[b]-geoCounts[a]);
  const maxGeo=Math.max(...Object.values(geoCounts));

  document.getElementById('analyticsGrid').innerHTML=`
    <div class="analytics-card"><h4>By Type</h4>${barsHTML(typeCounts,typeOrder,typeColors,maxType)}</div>
    <div class="analytics-card"><h4>By Stage</h4>${barsHTML(stageCounts,stageOrder,'fill-stage',maxStage)}</div>
    <div class="analytics-card"><h4>By Geography</h4>${barsHTML(geoCounts,geoOrder,'fill-geo',maxGeo)}</div>
    <div class="analytics-card"><h4>Top Locations</h4>${topLocs.map(([loc,n])=>`<div class="bar-row"><span class="bar-label" style="min-width:100px">${loc}</span><div class="bar-track"><div class="bar-fill fill-stage" style="width:${Math.round(n/topLocs[0][1]*100)}%"></div></div><span class="bar-count">${n}</span></div>`).join('')}</div>
  `;
}

// ===== ONBOARDING =====
function initOnboarding(){
  const banner=document.getElementById('onboardingBanner');
  if(localStorage.getItem('mc_onboarding_dismissed')==='1'){banner.style.display='none';return}
  if(localStorage.getItem('mc_onboarding_collapsed')==='1')banner.classList.add('collapsed');
}
function toggleOnboarding(){document.getElementById('onboardingBanner').classList.toggle('collapsed');localStorage.setItem('mc_onboarding_collapsed',document.getElementById('onboardingBanner').classList.contains('collapsed')?'1':'0')}
function dismissOnboarding(){document.getElementById('onboardingBanner').style.display='none';localStorage.setItem('mc_onboarding_dismissed','1')}

// ===== SHARE =====
function copyProfileLink(btn,id){
  const url=window.location.origin+window.location.pathname+'#profile/'+id;
  navigator.clipboard.writeText(url).then(()=>{btn.classList.add('copied');btn.innerHTML='‚úì Copied!';setTimeout(()=>{btn.classList.remove('copied');btn.innerHTML='üìã Copy Link'},2000)});
}
function shareOnTwitter(name,id){
  const url=window.location.origin+window.location.pathname+'#profile/'+id;
  const text='Check out '+name+' on Match Capital ‚Äî investor discovery for founders';
  window.open('https://twitter.com/intent/tweet?text='+encodeURIComponent(text)+'&url='+encodeURIComponent(url),'_blank','width=550,height=420');
}

// ===== GO =====
initOnboarding();
init();
</script>
</body>
</html>
