<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Match Capital ‚Äî Find the right investors. Skip the noise.</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
<style>
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
:root{
  --bg:#09090b;--card:#111113;--card-hover:#161618;
  --border:rgba(255,255,255,0.06);--border-hover:rgba(255,255,255,0.12);
  --text:#e4e4e7;--text-muted:#71717a;--text-dim:#52525b;
  --accent:#3b82f6;--accent2:#8b5cf6;
  --green:#22c55e;--green-bg:rgba(34,197,94,0.1);
  --radius:12px;--radius-sm:8px;
}
html{scroll-behavior:smooth}
body{font-family:'Inter',system-ui,sans-serif;background:var(--bg);color:var(--text);line-height:1.6;-webkit-font-smoothing:antialiased}
a{color:var(--accent);text-decoration:none}
button{font-family:inherit;cursor:pointer;border:none;background:none;color:inherit}
input{font-family:inherit;color:inherit}

/* Gradient text */
.gradient-text{background:linear-gradient(135deg,var(--accent),var(--accent2));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}

/* Container */
.container{max-width:1200px;margin:0 auto;padding:0 24px}

/* ===== NAV ===== */
nav{position:fixed;top:0;left:0;right:0;z-index:100;background:rgba(9,9,11,0.8);backdrop-filter:blur(20px);border-bottom:1px solid var(--border)}
nav .inner{display:flex;align-items:center;justify-content:space-between;height:64px;max-width:1200px;margin:0 auto;padding:0 24px}
.logo{font-weight:800;font-size:1.2rem;letter-spacing:-0.02em}
.nav-links{display:flex;gap:8px;align-items:center}
.nav-links a,.nav-links button{padding:8px 16px;border-radius:var(--radius-sm);font-size:0.875rem;font-weight:500;color:var(--text-muted);transition:all 0.2s}
.nav-links a:hover,.nav-links button:hover{color:var(--text);background:rgba(255,255,255,0.05)}
.nav-links .saved-count{background:var(--accent);color:#fff;font-size:0.7rem;border-radius:50%;width:18px;height:18px;display:inline-flex;align-items:center;justify-content:center;margin-left:4px;font-weight:700}

/* ===== HERO ===== */
#hero{padding:160px 0 100px;text-align:center;position:relative;overflow:hidden}
#hero::before{content:'';position:absolute;top:-200px;left:50%;transform:translateX(-50%);width:800px;height:800px;background:radial-gradient(circle,rgba(59,130,246,0.08),transparent 70%);pointer-events:none}
#hero h1{font-size:clamp(2.5rem,6vw,4rem);font-weight:800;letter-spacing:-0.03em;line-height:1.1;margin-bottom:16px}
#hero .tagline{font-size:clamp(1rem,2vw,1.25rem);color:var(--text-muted);max-width:600px;margin:0 auto 40px}
.hero-ctas{display:flex;gap:12px;justify-content:center;flex-wrap:wrap}
.btn-primary{padding:12px 28px;border-radius:var(--radius-sm);background:linear-gradient(135deg,var(--accent),var(--accent2));color:#fff;font-weight:600;font-size:0.95rem;transition:all 0.2s;box-shadow:0 0 20px rgba(59,130,246,0.3)}
.btn-primary:hover{transform:translateY(-1px);box-shadow:0 0 30px rgba(59,130,246,0.4)}
.btn-secondary{padding:12px 28px;border-radius:var(--radius-sm);border:1px solid var(--border);color:var(--text-muted);font-weight:600;font-size:0.95rem;transition:all 0.2s}
.btn-secondary:hover{border-color:var(--border-hover);color:var(--text);background:rgba(255,255,255,0.03)}

/* Browse All link */
.hero-browse{margin-top:16px;font-size:0.9rem;color:var(--text-muted)}
.hero-browse a{color:var(--accent);font-weight:500;transition:color 0.2s}
.hero-browse a:hover{color:var(--accent2)}

/* ===== SEARCH SECTION ===== */
#search-section{padding:60px 0 40px}
.search-header{margin-bottom:32px}
.search-bar{position:relative;margin-bottom:24px}
.search-bar input{width:100%;padding:16px 20px 16px 48px;border-radius:var(--radius);border:1px solid var(--border);background:var(--card);font-size:1rem;outline:none;transition:border 0.2s}
.search-bar input:focus{border-color:var(--accent)}
.search-bar svg{position:absolute;left:16px;top:50%;transform:translateY(-50%);color:var(--text-dim)}
.search-bar .clear-btn{position:absolute;right:16px;top:50%;transform:translateY(-50%);color:var(--text-dim);font-size:1.2rem;display:none}
.search-bar .clear-btn.show{display:block}

/* Filters */
.filters{display:flex;flex-direction:column;gap:16px;margin-bottom:32px}
.filter-row{display:flex;flex-wrap:wrap;gap:8px;align-items:center}
.filter-label{font-size:0.8rem;font-weight:600;color:var(--text-dim);text-transform:uppercase;letter-spacing:0.05em;min-width:80px;flex-shrink:0}
.chip{padding:6px 14px;border-radius:20px;border:1px solid var(--border);font-size:0.8rem;font-weight:500;color:var(--text-muted);transition:all 0.2s;white-space:nowrap}
.chip:hover{border-color:var(--border-hover);color:var(--text)}
.chip.active{background:linear-gradient(135deg,rgba(59,130,246,0.15),rgba(139,92,246,0.15));border-color:rgba(59,130,246,0.4);color:var(--text)}
.filter-row select{padding:6px 14px;border-radius:20px;border:1px solid var(--border);background:var(--card);font-size:0.8rem;color:var(--text-muted);outline:none}
.filter-row input[type=range]{width:120px;accent-color:var(--accent)}
.range-display{font-size:0.8rem;color:var(--text-muted);min-width:100px}

/* Results */
.results-info{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px;font-size:0.85rem;color:var(--text-muted)}
.results-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:16px}
@media(max-width:900px){.results-grid{grid-template-columns:repeat(2,1fr)}}
@media(max-width:600px){.results-grid{grid-template-columns:1fr}.filter-label{min-width:60px}}

/* Clear Filters */
.clear-filters-btn{padding:4px 12px;border-radius:20px;border:1px solid rgba(239,68,68,0.3);font-size:0.8rem;font-weight:500;color:#f87171;background:rgba(239,68,68,0.08);transition:all 0.2s;margin-left:8px}
.clear-filters-btn:hover{background:rgba(239,68,68,0.15);border-color:rgba(239,68,68,0.5)}
.filter-badge{color:var(--accent);font-weight:500}

/* Investor Card */
.investor-card{background:var(--card);border:1px solid var(--border);border-radius:var(--radius);padding:24px;cursor:pointer;transition:all 0.25s ease;position:relative;overflow:hidden}
.investor-card:hover{border-color:rgba(99,102,241,0.4);background:var(--card-hover);transform:translateY(-2px);box-shadow:0 8px 30px rgba(0,0,0,0.3),0 0 20px rgba(59,130,246,0.1),0 0 40px rgba(139,92,246,0.06)}
.investor-card::before{content:'';position:absolute;top:0;left:0;right:0;height:2px;background:linear-gradient(90deg,transparent,var(--accent),var(--accent2),transparent);opacity:0;transition:opacity 0.3s}
.investor-card:hover::before{opacity:1}
.investor-card .card-thesis{font-size:0.8rem;color:var(--text-dim);line-height:1.5;margin-bottom:10px;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}
.investor-card .sector-tags{display:flex;gap:4px;margin-bottom:10px;align-items:center}
.sector-tags .tag-sector{padding:3px 8px;border-radius:4px;font-size:0.7rem;font-weight:500;background:rgba(139,92,246,0.08);color:#c4b5fd}
.sector-tags .tag-overflow{font-size:0.7rem;color:var(--text-dim);padding:3px 6px}

/* Card staggered animation */
@keyframes cardFadeIn{from{opacity:0;transform:translateY(16px)}to{opacity:1;transform:translateY(0)}}
.investor-card{animation:cardFadeIn 0.4s ease both}
.investor-card .card-header{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:12px}
.investor-card .avatar{width:44px;height:44px;border-radius:50%;background:linear-gradient(135deg,var(--accent),var(--accent2));display:flex;align-items:center;justify-content:center;font-weight:700;font-size:1rem;color:#fff;flex-shrink:0}
.investor-card .active-badge{display:flex;align-items:center;gap:4px;font-size:0.7rem;color:var(--green);background:var(--green-bg);padding:4px 10px;border-radius:20px;font-weight:600}
.investor-card .active-badge .dot{width:6px;height:6px;border-radius:50%;background:var(--green);animation:pulse 2s infinite}
@keyframes pulse{0%,100%{opacity:1}50%{opacity:0.4}}
.investor-card .name{font-weight:700;font-size:1rem;margin-bottom:2px}
.investor-card .firm{font-size:0.85rem;color:var(--text-muted);margin-bottom:12px}
.investor-card .type-badge{display:inline-block;padding:3px 10px;border-radius:20px;font-size:0.7rem;font-weight:600;margin-bottom:12px}
.type-vc{background:rgba(59,130,246,0.12);color:#60a5fa}
.type-angel{background:rgba(250,204,21,0.12);color:#fbbf24}
.type-family-office{background:rgba(34,197,94,0.12);color:#4ade80}
.type-corp-vc{background:rgba(168,85,247,0.12);color:#c084fc}
.type-angel-group{background:rgba(251,146,60,0.12);color:#fb923c}
/* Org avatar */
.avatar-org{border-radius:var(--radius-sm) !important;background:linear-gradient(135deg,#6366f1,#8b5cf6) !important;font-size:0.7rem !important}
.member-count-badge{display:inline-flex;align-items:center;gap:3px;font-size:0.7rem;color:var(--accent);background:rgba(59,130,246,0.08);padding:3px 8px;border-radius:12px;font-weight:600}
.key-people-list{list-style:none;padding:0}
.key-people-list li{padding:4px 0;font-size:0.85rem;color:var(--text-muted)}
.investor-card .tags{display:flex;flex-wrap:wrap;gap:4px;margin-bottom:12px}
.tag{padding:3px 8px;border-radius:4px;font-size:0.7rem;font-weight:500;background:rgba(255,255,255,0.04);color:var(--text-dim)}
.tag-stage{background:rgba(59,130,246,0.08);color:#93c5fd}
.tag-sector{background:rgba(139,92,246,0.08);color:#c4b5fd}
.investor-card .check-size{font-size:0.8rem;color:var(--text-muted);margin-bottom:4px}
.investor-card .location{font-size:0.8rem;color:var(--text-dim)}

/* ===== MODAL ===== */
.modal-overlay{position:fixed;inset:0;z-index:200;background:rgba(0,0,0,0);backdrop-filter:blur(0px);display:none;align-items:flex-end;justify-content:center;padding:24px;transition:background 0.3s ease,backdrop-filter 0.3s ease}
.modal-overlay.open{display:flex}
.modal-overlay.open.animate-in{background:rgba(0,0,0,0.7);backdrop-filter:blur(8px)}
.modal{background:var(--bg);border:1px solid var(--border);border-radius:16px;width:100%;max-width:720px;max-height:90vh;overflow-y:auto;position:relative;opacity:0;transform:translateY(40px);transition:opacity 0.35s ease,transform 0.35s ease}
.modal-overlay.open.animate-in .modal{opacity:1;transform:translateY(0)}
.modal-overlay.animate-out .modal{opacity:0;transform:translateY(40px);transition:opacity 0.25s ease,transform 0.25s ease}
.modal-overlay.animate-out{background:rgba(0,0,0,0);backdrop-filter:blur(0px);transition:background 0.25s ease,backdrop-filter 0.25s ease}
.modal-close{position:absolute;top:16px;right:16px;font-size:1.5rem;color:var(--text-dim);z-index:1;width:36px;height:36px;display:flex;align-items:center;justify-content:center;border-radius:50%;transition:background 0.2s}
.modal-close:hover{background:rgba(255,255,255,0.05)}
.modal-header{padding:32px 32px 0;display:flex;gap:20px;align-items:flex-start}
.modal-avatar{width:64px;height:64px;border-radius:50%;background:linear-gradient(135deg,var(--accent),var(--accent2));display:flex;align-items:center;justify-content:center;font-weight:700;font-size:1.5rem;color:#fff;flex-shrink:0}
.modal-header-info{flex:1}
.modal-header-info h2{font-size:1.5rem;font-weight:700;margin-bottom:2px;display:flex;align-items:center;gap:8px}
.modal-header-info .firm{font-size:1rem;color:var(--text-muted);margin-bottom:8px}
.modal-header-info .badges{display:flex;gap:8px;flex-wrap:wrap;align-items:center}
.modal-body{padding:24px 32px 32px}
.modal-section{margin-bottom:24px}
.modal-section h3{font-size:0.8rem;font-weight:600;color:var(--text-dim);text-transform:uppercase;letter-spacing:0.05em;margin-bottom:10px}
.modal-section p{color:var(--text-muted);font-size:0.9rem;line-height:1.7}
.modal-tags{display:flex;flex-wrap:wrap;gap:6px}
.modal-tags .tag{padding:5px 12px;font-size:0.8rem}
.investment-list{list-style:none}
.investment-list li{display:flex;justify-content:space-between;padding:8px 0;border-bottom:1px solid var(--border);font-size:0.9rem}
.investment-list li:last-child{border:none}
.investment-list .company{font-weight:600}
.investment-list .round-year{color:var(--text-muted)}
.modal-links-row{display:flex;gap:8px}
.modal-links-row a{width:40px;height:40px;border-radius:50%;border:1px solid var(--border);display:flex;align-items:center;justify-content:center;font-size:1.1rem;color:var(--text-muted);transition:all 0.2s;text-decoration:none}
.modal-links-row a:hover{border-color:var(--accent);color:var(--text);background:rgba(59,130,246,0.08)}
.modal-actions{display:flex;gap:12px;margin-top:24px;padding-top:24px;border-top:1px solid var(--border)}
.btn-save{padding:10px 24px;border-radius:var(--radius-sm);background:linear-gradient(135deg,var(--accent),var(--accent2));color:#fff;font-weight:600;font-size:0.9rem;transition:all 0.2s}
.btn-save:hover{box-shadow:0 0 20px rgba(59,130,246,0.3)}
.btn-save.saved{background:rgba(255,255,255,0.06);color:var(--text-muted)}
.fund-info{display:grid;grid-template-columns:1fr 1fr;gap:12px}
.fund-info-item{background:rgba(255,255,255,0.02);border-radius:var(--radius-sm);padding:12px 16px}
.fund-info-item .label{font-size:0.75rem;color:var(--text-dim);margin-bottom:4px}
.fund-info-item .value{font-weight:600;font-size:0.9rem}
/* Profile two-column grid */
.profile-grid{display:grid;grid-template-columns:1fr 1fr;gap:0 24px}
.profile-grid .full-width{grid-column:1/-1}
/* Social proof */
.social-proof{display:flex;gap:16px;flex-wrap:wrap;margin-bottom:20px;padding:12px 16px;background:rgba(255,255,255,0.02);border-radius:var(--radius-sm);border:1px solid var(--border)}
.proof-item{display:flex;align-items:center;gap:6px;font-size:0.8rem;color:var(--text-muted)}
.proof-item .proof-val{font-weight:700;color:var(--text)}
.verified-badge{display:inline-flex;align-items:center;gap:4px;padding:3px 10px;border-radius:20px;font-size:0.7rem;font-weight:600;background:rgba(59,130,246,0.1);color:#60a5fa}
.activity-dot{width:8px;height:8px;border-radius:50%;display:inline-block}
.activity-dot.green{background:var(--green)}
.activity-dot.yellow{background:#eab308}
.activity-dot.gray{background:#52525b}
/* Similar investors */
.similar-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(150px,1fr));gap:10px}
.similar-card{background:rgba(255,255,255,0.02);border:1px solid var(--border);border-radius:var(--radius-sm);padding:14px;text-align:center;transition:all 0.2s;cursor:pointer}
.similar-card:hover{border-color:rgba(99,102,241,0.4);background:var(--card-hover)}
.similar-card .sim-avatar{width:36px;height:36px;border-radius:50%;background:linear-gradient(135deg,var(--accent),var(--accent2));display:flex;align-items:center;justify-content:center;font-weight:700;font-size:0.75rem;color:#fff;margin:0 auto 8px}
.similar-card .sim-name{font-weight:600;font-size:0.85rem;margin-bottom:2px}
.similar-card .sim-firm{font-size:0.75rem;color:var(--text-muted);margin-bottom:8px}
.similar-card .sim-link{font-size:0.75rem;color:var(--accent);font-weight:500}
/* Add to list dropdown in modal header */
.modal-list-dropdown{position:relative;display:inline-block}
.modal-list-dd-content{position:absolute;top:100%;left:0;margin-top:4px;background:var(--card);border:1px solid var(--border);border-radius:var(--radius-sm);padding:6px;z-index:10;box-shadow:0 8px 30px rgba(0,0,0,0.4);min-width:200px;max-height:240px;overflow-y:auto;display:none}
.modal-list-dd-content.show{display:block}
.modal-list-dd-item{padding:8px 12px;border-radius:6px;font-size:0.82rem;color:var(--text-muted);cursor:pointer;transition:background 0.15s;display:flex;align-items:center;gap:8px}
.modal-list-dd-item:hover{background:rgba(255,255,255,0.05);color:var(--text)}
.modal-list-dd-item input[type=checkbox]{accent-color:var(--accent)}

/* ===== SAVED SECTION ===== */
#saved-section{padding:60px 0;display:none}
#saved-section h2{font-size:1.5rem;font-weight:700;margin-bottom:8px}
#saved-section .subtitle{color:var(--text-muted);margin-bottom:24px;font-size:0.9rem}
.saved-actions{display:flex;gap:12px;margin-bottom:24px}
.saved-empty{text-align:center;padding:60px 0;color:var(--text-dim)}

/* Nav active underline */
.nav-links a.nav-active,.nav-links button.nav-active{color:var(--text);position:relative}
.nav-links a.nav-active::after,.nav-links button.nav-active::after{content:'';position:absolute;bottom:-4px;left:8px;right:8px;height:2px;background:linear-gradient(90deg,var(--accent),var(--accent2));border-radius:2px}

/* ===== FOOTER ===== */
footer{padding:60px 0 40px;border-top:1px solid var(--border);margin-top:100px}
footer .inner{display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:16px;max-width:1200px;margin:0 auto;padding:0 24px}
footer .left{font-size:0.75rem;color:var(--text-dim)}
footer .links{display:flex;gap:20px}
footer .links a{font-size:0.75rem;color:var(--text-dim);transition:color 0.2s}
footer .links a:hover{color:var(--text)}

/* Scrollbar */
::-webkit-scrollbar{width:6px}
::-webkit-scrollbar-track{background:transparent}
::-webkit-scrollbar-thumb{background:rgba(255,255,255,0.1);border-radius:3px}

/* No results */
.no-results{grid-column:1/-1;text-align:center;padding:60px 0;color:var(--text-dim)}
.no-results .no-results-icon{font-size:3rem;margin-bottom:16px;opacity:0.5}
.no-results .no-results-hint{font-size:0.85rem;color:var(--text-dim);margin-top:8px}

/* Loading skeleton */
@keyframes shimmer{0%{background-position:-400px 0}100%{background-position:400px 0}}
.skeleton-card{background:var(--card);border:1px solid var(--border);border-radius:var(--radius);padding:24px;min-height:240px}
.skeleton-line{height:12px;border-radius:6px;background:linear-gradient(90deg,rgba(255,255,255,0.04) 25%,rgba(255,255,255,0.08) 50%,rgba(255,255,255,0.04) 75%);background-size:800px;animation:shimmer 1.5s infinite linear;margin-bottom:12px}
.skeleton-line.w60{width:60%}
.skeleton-line.w40{width:40%}
.skeleton-line.w80{width:80%}
.skeleton-circle{width:44px;height:44px;border-radius:50%;background:linear-gradient(90deg,rgba(255,255,255,0.04) 25%,rgba(255,255,255,0.08) 50%,rgba(255,255,255,0.04) 75%);background-size:800px;animation:shimmer 1.5s infinite linear;margin-bottom:12px}

/* Mobile improvements */
@media(max-width:600px){
  .container{padding:0 16px}
  nav .inner{padding:0 16px}
  .search-bar input{padding:14px 16px 14px 44px;font-size:0.95rem}
  .filter-row{gap:6px}
  .chip{padding:8px 14px;font-size:0.82rem}
  .investor-card{padding:18px}
  .modal-header{padding:24px 20px 0;flex-direction:column;align-items:center;text-align:center}
  .modal-body{padding:20px}
  .profile-grid{grid-template-columns:1fr}
  .fund-info{grid-template-columns:1fr}
  .compare-grid.cols-2,.compare-grid.cols-3{grid-template-columns:1fr;gap:0}
  .compare-cell.label{background:var(--card);font-weight:700;border-top:1px solid var(--border)}
  .hero-ctas{flex-direction:column;align-items:center}
  #hero{padding:120px 0 60px}
  #hero h1{font-size:2rem}
  .modal{max-height:95vh;border-radius:16px 16px 0 0}
  .similar-grid{grid-template-columns:repeat(2,1fr)}
}

/* ===== COMPARE ===== */
.compare-btn{position:absolute;top:12px;right:12px;width:28px;height:28px;border-radius:50%;border:2px solid var(--border);background:var(--card);display:flex;align-items:center;justify-content:center;font-size:0.75rem;color:var(--text-dim);transition:all 0.2s;z-index:2}
.compare-btn:hover{border-color:var(--accent);color:var(--accent)}
.compare-btn.selected{background:var(--accent);border-color:var(--accent);color:#fff}
.compare-bar{position:fixed;bottom:0;left:0;right:0;z-index:150;background:rgba(9,9,11,0.95);backdrop-filter:blur(20px);border-top:1px solid var(--border);padding:16px 24px;display:none;align-items:center;justify-content:center;gap:16px}
.compare-bar.show{display:flex}
.compare-bar .avatars{display:flex;gap:-8px}
.compare-bar .mini-avatar{width:32px;height:32px;border-radius:50%;background:linear-gradient(135deg,var(--accent),var(--accent2));display:flex;align-items:center;justify-content:center;font-size:0.7rem;font-weight:700;color:#fff;border:2px solid var(--bg);margin-left:-8px}
.compare-bar .mini-avatar:first-child{margin-left:0}
.compare-modal{background:var(--bg);border:1px solid var(--border);border-radius:16px;width:100%;max-width:1100px;max-height:90vh;overflow-y:auto;position:relative;animation:modalIn 0.25s ease;padding:32px}
.compare-grid{display:grid;gap:1px;background:var(--border)}
.compare-grid.cols-2{grid-template-columns:200px 1fr 1fr}
.compare-grid.cols-3{grid-template-columns:180px 1fr 1fr 1fr}
.compare-cell{background:var(--bg);padding:12px 16px;font-size:0.85rem;color:var(--text-muted)}
.compare-cell.label{font-weight:600;color:var(--text-dim);font-size:0.75rem;text-transform:uppercase;letter-spacing:0.05em;display:flex;align-items:center}
.compare-cell.header{background:var(--card);text-align:center;padding:20px 16px}
.compare-cell.header .name{font-weight:700;font-size:1rem;color:var(--text);margin-top:8px}
.compare-cell.header .firm{font-size:0.8rem;color:var(--text-muted)}
.compare-remove{margin-top:8px;font-size:0.75rem;color:var(--text-dim);padding:4px 12px;border-radius:20px;border:1px solid var(--border);transition:all 0.2s}
.compare-remove:hover{border-color:rgba(239,68,68,0.5);color:#f87171}

/* ===== NAMED LISTS ===== */
.list-tabs{display:flex;gap:8px;flex-wrap:wrap;margin-bottom:24px}
.list-tab{padding:8px 16px;border-radius:20px;border:1px solid var(--border);font-size:0.8rem;font-weight:500;color:var(--text-muted);transition:all 0.2s;display:flex;align-items:center;gap:6px}
.list-tab:hover{border-color:var(--border-hover);color:var(--text)}
.list-tab.active{background:linear-gradient(135deg,rgba(59,130,246,0.15),rgba(139,92,246,0.15));border-color:rgba(59,130,246,0.4);color:var(--text)}
.list-tab .count{background:rgba(255,255,255,0.08);padding:2px 7px;border-radius:10px;font-size:0.7rem}
.list-tab.active .count{background:rgba(59,130,246,0.3)}
.save-dropdown{position:absolute;bottom:100%;left:0;right:0;background:var(--card);border:1px solid var(--border);border-radius:var(--radius-sm);padding:6px;z-index:10;box-shadow:0 -8px 30px rgba(0,0,0,0.4);margin-bottom:4px;max-height:240px;overflow-y:auto}
.save-dropdown-item{padding:8px 12px;border-radius:6px;font-size:0.85rem;color:var(--text-muted);cursor:pointer;transition:background 0.15s;display:flex;align-items:center;gap:8px}
.save-dropdown-item:hover{background:rgba(255,255,255,0.05);color:var(--text)}
.save-dropdown-item.in-list{color:var(--accent)}
.save-dropdown-item.create{color:var(--accent);border-top:1px solid var(--border);margin-top:4px;padding-top:12px}
.save-dropdown .new-list-input{width:100%;padding:8px 12px;border-radius:6px;border:1px solid var(--border);background:var(--bg);font-size:0.85rem;outline:none;margin-top:4px}
.save-dropdown .new-list-input:focus{border-color:var(--accent)}
.save-wrap{position:relative;display:inline-block}
.delete-list-btn{font-size:0.75rem;color:var(--text-dim);padding:4px 8px;border-radius:4px;transition:all 0.2s;margin-left:auto}
.delete-list-btn:hover{color:#f87171;background:rgba(239,68,68,0.1)}
</style>
</head>
<body>

<!-- NAV -->
<nav>
  <div class="inner">
    <div class="logo"><span class="gradient-text">Match Capital</span></div>
    <div class="nav-links">
      <a href="#" onclick="showSection('hero')">Home</a>
      <a href="#search" onclick="showSection('search')">Search</a>
      <button onclick="showSection('saved')">Saved <span class="saved-count" id="savedCount">0</span></button>
    </div>
  </div>
</nav>

<!-- HERO -->
<section id="hero">
  <div class="container">
    <h1>Find the right investors.<br><span class="gradient-text">Skip the noise.</span></h1>
    <p class="tagline">The most comprehensive investor intelligence tool for founders. Search <span id="investorCountHero">150+</span> investors by stage, sector, check size, and more.</p>
    <div class="hero-ctas">
      <button class="btn-primary" onclick="showSection('search')">Start Searching ‚Üí</button>
    </div>
    <p class="hero-browse"><a href="#search" onclick="showSection('search');clearAllFilters()">Browse All Investors ‚Üí</a></p>
  </div>
</section>

<!-- SEARCH -->
<section id="search-section">
  <div class="container">
    <div class="search-bar">
      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.35-4.35"/></svg>
      <input type="text" id="searchInput" placeholder="Search by name, firm, sector, stage, location...">
      <button class="clear-btn" id="clearSearch" onclick="clearSearch()">√ó</button>
    </div>

    <div class="filters">
      <div class="filter-row">
        <span class="filter-label">Stage</span>
        <button class="chip" data-filter="stage" data-value="Pre-Seed">Pre-Seed</button>
        <button class="chip" data-filter="stage" data-value="Seed">Seed</button>
        <button class="chip" data-filter="stage" data-value="Series A">Series A</button>
        <button class="chip" data-filter="stage" data-value="Series B">Series B</button>
        <button class="chip" data-filter="stage" data-value="Growth">Growth</button>
      </div>
      <div class="filter-row">
        <span class="filter-label">Sector</span>
        <button class="chip" data-filter="sector" data-value="SaaS">SaaS</button>
        <button class="chip" data-filter="sector" data-value="Fintech">Fintech</button>
        <button class="chip" data-filter="sector" data-value="HealthTech">HealthTech</button>
        <button class="chip" data-filter="sector" data-value="AI/ML">AI/ML</button>
        <button class="chip" data-filter="sector" data-value="Consumer">Consumer</button>
        <button class="chip" data-filter="sector" data-value="Enterprise">Enterprise</button>
        <button class="chip" data-filter="sector" data-value="Climate">Climate</button>
        <button class="chip" data-filter="sector" data-value="Crypto">Crypto</button>
        <button class="chip" data-filter="sector" data-value="Biotech">Biotech</button>
        <button class="chip" data-filter="sector" data-value="DeepTech">DeepTech</button>
      </div>
      <div class="filter-row">
        <span class="filter-label">Check Size</span>
        <input type="range" id="checkMin" min="0" max="25000000" step="100000" value="0">
        <input type="range" id="checkMax" min="0" max="25000000" step="100000" value="25000000">
        <span class="range-display" id="checkDisplay">$0 ‚Äì $25M+</span>
      </div>
      <div class="filter-row">
        <span class="filter-label">Type</span>
        <button class="chip" data-filter="type" data-value="VC">VC</button>
        <button class="chip" data-filter="type" data-value="Angel">Angel</button>
        <button class="chip" data-filter="type" data-value="Family Office">Family Office</button>
        <button class="chip" data-filter="type" data-value="Corp VC">Corp VC</button>
        <button class="chip" data-filter="type" data-value="Angel Group">Angel Group</button>
      </div>
      <div class="filter-row">
        <span class="filter-label">Entity</span>
        <button class="chip" data-filter="entity" data-value="individual">Individuals</button>
        <button class="chip" data-filter="entity" data-value="organization">Organizations</button>
      </div>
      <div class="filter-row">
        <span class="filter-label">Geography</span>
        <button class="chip" data-filter="geo" data-value="US">US</button>
        <button class="chip" data-filter="geo" data-value="EU">EU</button>
        <button class="chip" data-filter="geo" data-value="Asia">Asia</button>
        <button class="chip" data-filter="geo" data-value="Global">Global</button>
      </div>
      <div class="filter-row">
        <span class="filter-label">Activity</span>
        <select id="activityFilter" onchange="renderResults()">
          <option value="any">Any time</option>
          <option value="3">Last 3 months</option>
          <option value="6">Last 6 months</option>
          <option value="12">Last 12 months</option>
        </select>
      </div>
      <div class="filter-row">
        <span class="filter-label">Sort</span>
        <select id="sortSelect" onchange="renderResults()">
          <option value="relevance">Relevance</option>
          <option value="nameAZ">Name A ‚Üí Z</option>
          <option value="nameZA">Name Z ‚Üí A</option>
          <option value="recent">Recent Activity</option>
          <option value="checkSize">Check Size (High ‚Üí Low)</option>
          <option value="checkSizeAsc">Check Size (Low ‚Üí High)</option>
          <option value="location">Location</option>
        </select>
      </div>
    </div>

    <div class="results-info">
      <span><span id="resultsCount">0 investors</span><span id="filterBadge" class="filter-badge"></span><button id="clearFiltersBtn" class="clear-filters-btn" onclick="clearAllFilters()" style="display:none">Clear Filters ‚úï</button></span>
    </div>
    <div class="results-grid" id="resultsGrid"></div>
  </div>
</section>

<!-- SAVED -->
<section id="saved-section">
  <div class="container">
    <h2>Investor Lists</h2>
    <p class="subtitle">Organize your investors into named lists for outreach.</p>
    <div class="list-tabs" id="listTabs"></div>
    <div class="saved-actions" id="savedActions">
      <button class="btn-secondary" onclick="exportCSV()">Export CSV ‚Üì</button>
      <button class="btn-secondary" onclick="clearCurrentList()">Clear List</button>
      <button class="btn-secondary" onclick="deleteCurrentList()" id="deleteListBtn" style="color:#f87171">Delete List</button>
    </div>
    <div class="results-grid" id="savedGrid"></div>
    <div class="saved-empty" id="savedEmpty">No saved investors yet. Browse and save investors you're interested in.</div>
  </div>
</section>

<!-- COMPARE BAR -->
<div class="compare-bar" id="compareBar">
  <div class="avatars" id="compareAvatars"></div>
  <button class="btn-primary" onclick="openCompare()" id="compareBtn">Compare</button>
  <button class="btn-secondary" onclick="clearCompare()" style="padding:10px 16px">Clear</button>
</div>

<!-- COMPARE MODAL -->
<div class="modal-overlay" id="compareOverlay" onclick="if(event.target===this)closeCompare()">
  <div class="compare-modal" id="compareModal"></div>
</div>

<!-- MODAL -->
<div class="modal-overlay" id="modalOverlay" onclick="if(event.target===this)closeModal()">
  <div class="modal" id="modal"></div>
</div>

<!-- FOOTER -->
<footer>
  <div class="inner">
    <div class="left">Built by <a href="https://ralcorn.com" target="_blank">Ralcorn Consulting</a> ¬∑ Data sourced from public records</div>
    <div class="links">
      <a href="mailto:hello@matchcapital.ai">Contact</a>
    </div>
  </div>
</footer>

<script>
// ===== SAMPLE DATA (fallback) =====
const SAMPLE_DATA=[];

let investors=[];
let activeFilters={stage:[],sector:[],type:[],geo:[],entity:[]};
const PAGE_SIZE=24;
let displayedCount=PAGE_SIZE;
let lastFiltered=[];

// ===== NAMED LISTS =====
function loadLists(){
  let lists=JSON.parse(localStorage.getItem('mc_lists')||'null');
  if(!lists){
    // Migrate from old mc_saved
    const old=JSON.parse(localStorage.getItem('mc_saved')||'[]');
    lists={Saved:old};
    localStorage.setItem('mc_lists',JSON.stringify(lists));
  }
  return lists;
}
let namedLists=loadLists();
let currentListName=Object.keys(namedLists)[0]||'Saved';

function saveLists(){localStorage.setItem('mc_lists',JSON.stringify(namedLists))}
function allSavedIds(){const s=new Set();Object.values(namedLists).forEach(l=>l.forEach(id=>s.add(id)));return s}
function listsForInvestor(id){return Object.entries(namedLists).filter(([,ids])=>ids.includes(id)).map(([n])=>n)}

// ===== COMPARE =====
let compareIds=[];

// ===== DATA NORMALIZATION =====
const STAGE_MAP={seed:'Seed','pre-seed':'Pre-Seed','pre_seed':'Pre-Seed',series_a:'Series A',series_b:'Series B',growth:'Growth'};
const SECTOR_MAP={saas:'SaaS',fintech:'Fintech',healthtech:'HealthTech',ai_ml:'AI/ML',consumer:'Consumer',enterprise:'Enterprise',climate:'Climate',crypto:'Crypto',biotech:'Biotech',deeptech:'DeepTech',edtech:'EdTech',hardware:'Hardware',marketplace:'Marketplace'};
const TYPE_MAP={vc:'VC',angel:'Angel',family_office:'Family Office',corp_vc:'Corp VC',angel_group:'Angel Group'};
const GEO_MAP={us:'US',eu:'EU',asia:'Asia',global:'Global'};

function normalizeInvestor(inv){
  inv.stages=(inv.stages||[]).map(s=>STAGE_MAP[s]||s);
  inv.sectors=(inv.sectors||[]).map(s=>SECTOR_MAP[s]||s);
  inv.type=TYPE_MAP[inv.type]||inv.type;
  inv.geography=(inv.geography||[]).map(g=>GEO_MAP[g]||g);
  // Normalize links
  if(!inv.links){
    inv.links={
      linkedin:inv.linkedIn||inv.linkedin||null,
      twitter:inv.twitter?(/^http/.test(inv.twitter)?inv.twitter:'https://twitter.com/'+inv.twitter.replace('@','')):null,
      website:inv.firmUrl||inv.website||null
    };
  }
  if(!inv.fundStatus)inv.fundStatus=inv.activelyDeploying?'Actively Deploying':'Unknown';
  if(!inv.title)inv.title=inv.type;
  return inv;
}

// ===== INIT =====
async function init(){
  // Show loading skeleton
  const grid=document.getElementById('resultsGrid');
  grid.innerHTML=Array(6).fill('<div class="skeleton-card"><div class="skeleton-circle"></div><div class="skeleton-line w60"></div><div class="skeleton-line w40"></div><div class="skeleton-line w80"></div><div class="skeleton-line w60"></div></div>').join('');
  try{const r=await fetch('data/investors.json');if(r.ok)investors=(await r.json()).map(normalizeInvestor);else throw new Error('Fetch failed')}catch(e){investors=[];grid.innerHTML='<div class="no-results"><div class="no-results-icon">‚ö†Ô∏è</div>Failed to load investor data.<div class="no-results-hint">Please refresh the page or try again later.</div></div>';return}
  updateSavedCount();
  document.getElementById('investorCountHero').textContent=investors.length;
  handleHash();
  renderResults();
}

// ===== ROUTING =====
function handleHash(){
  const h=location.hash;
  if(h.startsWith('#profile/')){showSection('search');openProfileById(h.split('/')[1])}
  else if(h==='#saved')showSection('saved');
  else if(h==='#search')showSection('search');
  else showSection('hero');
}
window.addEventListener('hashchange',handleHash);

function showSection(s){
  document.getElementById('hero').style.display=s==='hero'?'':'none';
  document.getElementById('search-section').style.display=(s==='search')?'':'none';
  document.getElementById('saved-section').style.display=s==='saved'?'':'none';
  if(s==='saved')renderSaved();
  if(s==='search')document.getElementById('search-section').scrollIntoView({behavior:'smooth'});
  // Update nav active state
  document.querySelectorAll('.nav-links a, .nav-links button').forEach(el=>el.classList.remove('nav-active'));
  const navMap={hero:0,search:1,saved:2};
  const navEls=document.querySelectorAll('.nav-links a, .nav-links button');
  if(navEls[navMap[s]])navEls[navMap[s]].classList.add('nav-active');
}

// ===== FORMAT =====
function fmt(n){if(n>=1e6)return'$'+Math.round(n/1e6)+'M';if(n>=1e3)return'$'+Math.round(n/1e3)+'K';return'$'+n}
function initials(name){return name.split(' ').map(w=>w[0]).join('')}
function typeClass(t){return'type-'+t.toLowerCase().replace(/\s+/g,'-')}

// ===== FILTERS =====
document.querySelectorAll('.chip[data-filter]').forEach(c=>{
  c.addEventListener('click',()=>{
    const f=c.dataset.filter,v=c.dataset.value;
    c.classList.toggle('active');
    if(c.classList.contains('active'))activeFilters[f].push(v);
    else activeFilters[f]=activeFilters[f].filter(x=>x!==v);
    renderResults();
  });
});

const checkMin=document.getElementById('checkMin'),checkMax=document.getElementById('checkMax'),checkDisplay=document.getElementById('checkDisplay');
function updateCheckDisplay(){checkDisplay.textContent=fmt(+checkMin.value)+' ‚Äì '+fmt(+checkMax.value)+(+checkMax.value>=25e6?'+':'')}
checkMin.addEventListener('input',()=>{if(+checkMin.value>+checkMax.value)checkMax.value=checkMin.value;updateCheckDisplay();renderResults()});
checkMax.addEventListener('input',()=>{if(+checkMax.value<+checkMin.value)checkMin.value=checkMax.value;updateCheckDisplay();renderResults()});

// ===== SEARCH =====
const searchInput=document.getElementById('searchInput'),clearBtn=document.getElementById('clearSearch');
let debounceTimer;
searchInput.addEventListener('input',()=>{clearBtn.classList.toggle('show',searchInput.value.length>0);clearTimeout(debounceTimer);debounceTimer=setTimeout(renderResults,200)});
function clearSearch(){searchInput.value='';clearBtn.classList.remove('show');renderResults()}

// ===== RENDER =====
function filterInvestors(){
  const q=searchInput.value.toLowerCase();
  const cMin=+checkMin.value,cMax=+checkMax.value;
  const actMonths=document.getElementById('activityFilter').value;
  return investors.filter(inv=>{
    if(q){
      const fields=[inv.name,inv.firm,inv.thesis,inv.location,...inv.sectors,...inv.stages,...inv.geography,inv.type].map(s=>(s||'').toLowerCase());
      const words=q.split(/\s+/);
      const match=words.every(w=>fields.some(f=>f.includes(w)));
      if(!match){
        // Fuzzy: allow 1-char typos for words > 3 chars
        const fuzzy=words.every(w=>{
          if(w.length<=3)return fields.some(f=>f.includes(w));
          return fields.some(f=>{
            for(let i=0;i<=f.length-w.length;i++){
              let diff=0;
              for(let j=0;j<w.length;j++){if(f[i+j]!==w[j])diff++;if(diff>1)break}
              if(diff<=1)return true;
            }
            return false;
          });
        });
        if(!fuzzy)return false;
      }
    }
    if(activeFilters.stage.length&&!activeFilters.stage.some(s=>inv.stages.includes(s)))return false;
    if(activeFilters.sector.length&&!activeFilters.sector.some(s=>inv.sectors.includes(s)))return false;
    if(activeFilters.type.length&&!activeFilters.type.includes(inv.type))return false;
    if(activeFilters.geo.length&&!activeFilters.geo.some(g=>inv.geography.includes(g)))return false;
    if(activeFilters.entity.length&&!activeFilters.entity.includes(inv.entity))return false;
    if(inv.checkSize.max<cMin||inv.checkSize.min>cMax)return false;
    if(actMonths!=='any'&&inv.lastActive){
      const cutoff=new Date();cutoff.setMonth(cutoff.getMonth()-parseInt(actMonths));
      const lastAct=new Date(inv.lastActive);
      if(lastAct<cutoff)return false;
    }
    return true;
  });
}

function sortInvestors(list){
  const s=document.getElementById('sortSelect').value;
  if(s==='recent')return[...list].sort((a,b)=>new Date(b.lastActive)-new Date(a.lastActive));
  if(s==='checkSize')return[...list].sort((a,b)=>b.checkSize.max-a.checkSize.max);
  if(s==='checkSizeAsc')return[...list].sort((a,b)=>a.checkSize.min-b.checkSize.min);
  if(s==='nameAZ')return[...list].sort((a,b)=>a.name.localeCompare(b.name));
  if(s==='nameZA')return[...list].sort((a,b)=>b.name.localeCompare(a.name));
  if(s==='location')return[...list].sort((a,b)=>(a.location||'').localeCompare(b.location||''));
  return list;
}

function getActiveFilterCount(){
  let count=Object.values(activeFilters).reduce((a,b)=>a+b.length,0);
  if(+checkMin.value>0||+checkMax.value<25e6)count++;
  if(document.getElementById('activityFilter').value!=='any')count++;
  return count;
}

function renderResults(append){
  const filtered=sortInvestors(filterInvestors());
  lastFiltered=filtered;
  if(!append)displayedCount=PAGE_SIZE;
  const showing=Math.min(displayedCount,filtered.length);
  document.getElementById('resultsCount').textContent='Showing '+showing+' of '+filtered.length+' investor'+(filtered.length!==1?'s':'');
  const fc=getActiveFilterCount();
  const badge=document.getElementById('filterBadge');
  const clearBtn=document.getElementById('clearFiltersBtn');
  badge.textContent=fc?' ('+fc+' filter'+(fc>1?'s':'')+' active)':'';
  clearBtn.style.display=fc?'inline-block':'none';
  const grid=document.getElementById('resultsGrid');
  if(!filtered.length){grid.innerHTML='<div class="no-results"><div class="no-results-icon">üîç</div>No investors match your filters.<div class="no-results-hint">Try removing some filters or broadening your search terms.<br><button class="btn-secondary" onclick="clearAllFilters()" style="margin-top:12px;padding:8px 20px">Clear All Filters</button></div></div>';return}
  const page=filtered.slice(0,showing);
  grid.innerHTML=page.map((inv,i)=>cardHTML(inv,i)).join('');
  if(showing<filtered.length){
    grid.innerHTML+='<div style="grid-column:1/-1;text-align:center;padding:24px 0"><button class="btn-secondary" onclick="loadMore()" style="padding:12px 32px">Load More ('+Math.min(PAGE_SIZE,filtered.length-showing)+' more)</button></div>';
  }
}
function loadMore(){
  displayedCount+=PAGE_SIZE;
  renderResults(true);
}

function clearAllFilters(){
  activeFilters={stage:[],sector:[],type:[],geo:[],entity:[]};
  document.querySelectorAll('.chip.active').forEach(c=>c.classList.remove('active'));
  checkMin.value=0;checkMax.value=25e6;updateCheckDisplay();
  document.getElementById('activityFilter').value='any';
  searchInput.value='';clearBtn.classList.remove('show');
  renderResults();
}

function cardHTML(inv,idx){
  const isCompared=compareIds.includes(inv.id);
  const sectorTags=inv.sectors.slice(0,3).map(s=>`<span class="tag-sector">${s}</span>`).join('');
  const overflow=inv.sectors.length>3?`<span class="tag-overflow">+${inv.sectors.length-3}</span>`:'';
  const delay=Math.min((idx||0)*0.05,0.8);
  const isOrg=inv.entity==='organization';
  const avatarClass=isOrg?'avatar avatar-org':'avatar';
  const avatarContent=isOrg?'üè¢':initials(inv.name);
  const firmLine=isOrg?(inv.memberCount?`<div class="firm"><span class="member-count-badge">üë• ${inv.memberCount} members</span></div>`:''):`<div class="firm">${inv.firm||''}</div>`;
  return`<div class="investor-card" onclick="openProfile('${inv.id}')" style="animation-delay:${delay}s">
    <button class="compare-btn ${isCompared?'selected':''}" onclick="event.stopPropagation();toggleCompare('${inv.id}')" title="Compare">
      ${isCompared?'‚úì':'Ôºã'}
    </button>
    <div class="card-header">
      <div class="${avatarClass}">${avatarContent}</div>
      ${inv.activelyDeploying?'<div class="active-badge"><span class="dot"></span>Active</div>':''}
    </div>
    <div class="name">${inv.name}</div>
    ${firmLine}
    <div class="sector-tags">${sectorTags}${overflow}</div>
    <span class="type-badge ${typeClass(inv.type)}">${inv.type}</span>
    <div class="card-thesis">${inv.thesis}</div>
    <div class="tags">
      ${inv.stages.map(s=>`<span class="tag tag-stage">${s}</span>`).join('')}
    </div>
    <div class="check-size">üí∞ ${fmt(inv.checkSize.min)} ‚Äì ${fmt(inv.checkSize.max)}</div>
    <div class="location">${inv.location}</div>
  </div>`
}

// ===== PROFILE MODAL =====
function openProfileById(id){const inv=investors.find(i=>i.id===id);if(inv)openProfile(id)}

function getActivityStatus(lastActive){
  if(!lastActive)return{color:'gray',label:'Unknown'};
  const now=new Date(),last=new Date(lastActive);
  const months=(now-last)/(1000*60*60*24*30);
  if(months<=3)return{color:'green',label:'Active recently'};
  if(months<=6)return{color:'yellow',label:'Active 3-6mo ago'};
  return{color:'gray',label:'6+ months ago'};
}

function getPortfolioCount(inv){
  const all=new Set();
  (inv.recentInvestments||[]).forEach(i=>all.add(i.company));
  (inv.portfolioHighlights||[]).forEach(p=>{const name=p.replace(/\s*\(.*\)/,'').trim();all.add(name)});
  return all.size;
}

function isVerified(inv){return !!(inv.links.linkedin && inv.links.website)}

function findSimilarInvestors(inv){
  return investors.filter(other=>{
    if(other.id===inv.id)return false;
    const stageOverlap=inv.stages.filter(s=>other.stages.includes(s)).length;
    const sectorOverlap=inv.sectors.filter(s=>other.sectors.includes(s)).length;
    return(stageOverlap+sectorOverlap)>=2;
  }).slice(0,4);
}

function toggleModalListDropdown(e,id){
  e.stopPropagation();
  const dd=document.getElementById('modalListDD-'+id);
  dd.classList.toggle('show');
  if(dd.classList.contains('show'))renderModalListDD(dd,id);
}
function renderModalListDD(dd,investorId){
  dd.innerHTML=Object.keys(namedLists).map(name=>{
    const isIn=(namedLists[name]||[]).includes(investorId);
    return`<label class="modal-list-dd-item" onclick="event.stopPropagation()"><input type="checkbox" ${isIn?'checked':''} onchange="toggleInListDD('${investorId}','${name.replace(/'/g,"\\'")}')"> ${name}</label>`;
  }).join('');
}
function toggleInListDD(investorId,listName){
  if(!namedLists[listName])namedLists[listName]=[];
  const list=namedLists[listName];
  const idx=list.indexOf(investorId);
  if(idx>=0)list.splice(idx,1);else list.push(investorId);
  saveLists();updateSavedCount();
}

function openProfile(id){
  location.hash='profile/'+id;
  const inv=investors.find(i=>i.id===id);if(!inv)return;
  const activity=getActivityStatus(inv.lastActive);
  const portfolioCount=getPortfolioCount(inv);
  const verified=false;
  const similar=findSimilarInvestors(inv);

  const isOrg=inv.entity==='organization';
  const modalAvatarClass=isOrg?'modal-avatar avatar-org':'modal-avatar';
  const modalAvatarContent=isOrg?'üè¢':initials(inv.name);
  const firmLine=isOrg?(inv.title?`<div class="firm">${inv.title}</div>`:''):`<div class="firm">${inv.title} ¬∑ ${inv.firm}</div>`;
  document.getElementById('modal').innerHTML=`
    <button class="modal-close" onclick="closeModal()">√ó</button>
    <div class="modal-header">
      <div class="${modalAvatarClass}">${modalAvatarContent}</div>
      <div class="modal-header-info">
        <h2>${inv.name}${verified?'<span class="verified-badge">‚úì Verified</span>':''}</h2>
        ${firmLine}
        <div class="badges">
          <span class="type-badge ${typeClass(inv.type)}">${inv.type}</span>
          <span style="display:flex;align-items:center;gap:5px;font-size:0.8rem;color:var(--text-muted)"><span class="activity-dot ${activity.color}"></span>${activity.label}</span>
        </div>
        <div style="display:flex;gap:8px;margin-top:10px;align-items:center">
          <div class="modal-list-dropdown">
            <button class="btn-secondary" style="padding:8px 14px;font-size:0.82rem" onclick="toggleModalListDropdown(event,'${id}')">üìã Add to List</button>
            <div class="modal-list-dd-content" id="modalListDD-${id}"></div>
          </div>
        </div>
      </div>
    </div>
    <div class="modal-body">
      <div class="social-proof">
        <div class="proof-item">üìä <span class="proof-val">${portfolioCount}</span> portfolio companies</div>
        <div class="proof-item">üí∞ <span class="proof-val">${fmt(inv.checkSize.min)}‚Äì${fmt(inv.checkSize.max)}</span> checks</div>
        <div class="proof-item">üåç ${inv.geography.join(', ')}</div>
        ${inv.activelyDeploying?'<div class="proof-item" style="color:var(--green)">üü¢ Actively Deploying</div>':''}
      </div>

      ${isOrg&&(inv.keyPeople&&inv.keyPeople.length||inv.memberCount)?`
      <div class="modal-section full-width">
        ${inv.memberCount?`<div style="margin-bottom:8px"><span class="member-count-badge">üë• ${inv.memberCount} members</span></div>`:''}
        ${inv.keyPeople&&inv.keyPeople.length?`<h3>Key People</h3><ul class="key-people-list">${inv.keyPeople.map(p=>'<li>'+p+'</li>').join('')}</ul>`:''}
      </div>`:''}

      <div class="modal-section full-width"><h3>Investment Thesis</h3><p>${inv.thesis}</p></div>

      <div class="profile-grid">
        <div>
          <div class="modal-section"><h3>Focus</h3>
            <div class="modal-tags">
              ${inv.stages.map(s=>`<span class="tag tag-stage">${s}</span>`).join('')}
              ${inv.sectors.map(s=>`<span class="tag tag-sector">${s}</span>`).join('')}
              ${inv.geography.map(g=>`<span class="tag">${g}</span>`).join('')}
            </div>
          </div>
          <div class="modal-section"><h3>Check Size</h3><p>${fmt(inv.checkSize.min)} ‚Äì ${fmt(inv.checkSize.max)}</p></div>
        </div>
        <div>
          <div class="modal-section"><h3>Fund Info</h3>
            <div class="fund-info">
              <div class="fund-info-item"><div class="label">Fund Size</div><div class="value">${inv.fundSize}</div></div>
              <div class="fund-info-item"><div class="label">Status</div><div class="value">${inv.fundStatus}</div></div>
            </div>
          </div>
          <div class="modal-section"><h3>Recent Investments</h3>
            <ul class="investment-list">
              ${inv.recentInvestments.map(i=>`<li><span class="company">${i.company}</span><span class="round-year">${i.round} ¬∑ ${i.year}</span></li>`).join('')}
            </ul>
          </div>
        </div>
      </div>

      <div class="modal-section"><h3>Portfolio Highlights</h3>
        <div class="modal-tags">${inv.portfolioHighlights.map(p=>`<span class="tag">${p}</span>`).join('')}</div>
      </div>

      <div class="modal-section"><h3>Links</h3>
        <div class="modal-links-row">
          ${inv.links.linkedin?`<a href="${inv.links.linkedin}" target="_blank" title="LinkedIn">üíº</a>`:''}
          ${inv.links.twitter?`<a href="${inv.links.twitter}" target="_blank" title="Twitter">üê¶</a>`:''}
          ${inv.links.website?`<a href="${inv.links.website}" target="_blank" title="Website">üåê</a>`:''}
        </div>
      </div>

      ${similar.length?`
      <div class="modal-section" style="border-top:1px solid var(--border);padding-top:20px"><h3>Similar Investors</h3>
        <div class="similar-grid">
          ${similar.map(s=>`
            <div class="similar-card" onclick="closeModal();setTimeout(()=>openProfile('${s.id}'),100)">
              <div class="sim-avatar">${initials(s.name)}</div>
              <div class="sim-name">${s.name}</div>
              <div class="sim-firm">${s.firm}</div>
              <span class="sim-link">View ‚Üí</span>
            </div>`).join('')}
        </div>
      </div>`:''}

      <div class="modal-actions">
        <button class="btn-secondary" onclick="navigator.clipboard.writeText(window.location.origin+'#profile/${inv.id}').then(()=>{this.textContent='Link copied!';setTimeout(()=>this.textContent='Share Profile',2000)})">Share Profile</button>
      </div>
      <div style="text-align:center;margin-top:20px;padding-top:16px;border-top:1px solid var(--border)">
        <p style="font-size:0.85rem;color:var(--text-dim)">Are you ${inv.name}? <a href="mailto:hello@matchcapital.ai?subject=Claim Profile: ${encodeURIComponent(inv.name)}" style="color:var(--accent)">Claim this profile</a></p>
      </div>
    </div>`;
  const overlay=document.getElementById('modalOverlay');
  overlay.classList.remove('animate-out');
  overlay.classList.add('open');
  document.body.style.overflow='hidden';
  requestAnimationFrame(()=>requestAnimationFrame(()=>overlay.classList.add('animate-in')));
}

function closeModal(){
  const overlay=document.getElementById('modalOverlay');
  overlay.classList.remove('animate-in');
  overlay.classList.add('animate-out');
  setTimeout(()=>{
    overlay.classList.remove('open','animate-out');
    document.body.style.overflow='';
  },300);
  if(location.hash.startsWith('#profile'))history.replaceState(null,'','#search');
}
document.addEventListener('keydown',e=>{if(e.key==='Escape'){closeModal();closeCompare()}});

// ===== SAVE DROPDOWN =====
function toggleSaveDropdown(e,id){
  e.stopPropagation();
  const dd=document.getElementById('saveDropdown-'+id);
  if(dd.style.display==='none'){renderSaveDropdown(dd,id);dd.style.display='block'}
  else dd.style.display='none';
}
function renderSaveDropdown(dd,investorId){
  const inLists=listsForInvestor(investorId);
  dd.innerHTML=Object.keys(namedLists).map(name=>{
    const isIn=inLists.includes(name);
    return`<div class="save-dropdown-item ${isIn?'in-list':''}" onclick="event.stopPropagation();toggleInList('${investorId}','${name.replace(/'/g,"\\'")}',this.parentElement)">${isIn?'‚úì ':''} ${name}</div>`;
  }).join('')+`<div class="save-dropdown-item create" onclick="event.stopPropagation();showNewListInput(this.parentElement,'${investorId}')">+ Create new list</div>`;
}
function toggleInList(investorId,listName,dd){
  if(!namedLists[listName])namedLists[listName]=[];
  const list=namedLists[listName];
  const idx=list.indexOf(investorId);
  if(idx>=0)list.splice(idx,1);else list.push(investorId);
  saveLists();updateSavedCount();renderSaveDropdown(dd,investorId);
}
function showNewListInput(dd,investorId){
  // Remove existing input if any
  const existing=dd.querySelector('.new-list-input');if(existing)return existing.focus();
  const input=document.createElement('input');input.className='new-list-input';input.placeholder='List name...';
  dd.appendChild(input);input.focus();
  input.addEventListener('keydown',e=>{
    if(e.key==='Enter'&&input.value.trim()){
      const name=input.value.trim();
      if(!namedLists[name])namedLists[name]=[];
      namedLists[name].push(investorId);
      saveLists();updateSavedCount();renderSaveDropdown(dd,investorId);
    }
    if(e.key==='Escape'){input.remove()}
  });
}
// Close dropdowns on outside click
document.addEventListener('click',()=>{document.querySelectorAll('.save-dropdown').forEach(d=>d.style.display='none')});

function updateSavedCount(){
  const total=allSavedIds().size;
  document.getElementById('savedCount').textContent=total;
}

// ===== RENDER SAVED / LISTS =====
function renderSaved(){
  renderListTabs();
  const ids=namedLists[currentListName]||[];
  const saved=investors.filter(i=>ids.includes(i.id));
  const grid=document.getElementById('savedGrid');
  const empty=document.getElementById('savedEmpty');
  const delBtn=document.getElementById('deleteListBtn');
  // Only allow deleting non-default lists
  delBtn.style.display=(currentListName==='Saved')?'none':'';
  if(!saved.length){grid.innerHTML='';empty.style.display='';empty.textContent='No investors in "'+currentListName+'" yet.';return}
  empty.style.display='none';
  grid.innerHTML=saved.map(cardHTML).join('');
}
function renderListTabs(){
  const tabs=document.getElementById('listTabs');
  tabs.innerHTML=Object.entries(namedLists).map(([name,ids])=>{
    return`<button class="list-tab ${name===currentListName?'active':''}" onclick="currentListName='${name.replace(/'/g,"\\'")}';renderSaved()">${name} <span class="count">${ids.length}</span></button>`;
  }).join('')+`<button class="list-tab" onclick="promptNewList()" style="border-style:dashed">+ New List</button>`;
}
function promptNewList(){
  const name=prompt('New list name:');
  if(name&&name.trim()&&!namedLists[name.trim()]){
    namedLists[name.trim()]=[];saveLists();currentListName=name.trim();renderSaved();
  }
}

function exportCSV(){
  const ids=namedLists[currentListName]||[];
  const saved=investors.filter(i=>ids.includes(i.id));if(!saved.length)return;
  const rows=[['Name','Title','Firm','Type','Stages','Sectors','Check Min','Check Max','Location','Active','Website']];
  saved.forEach(i=>rows.push([i.name,i.title,i.firm,i.type,i.stages.join('; '),i.sectors.join('; '),i.checkSize.min,i.checkSize.max,i.location,i.activelyDeploying,i.links.website||'']));
  const csv=rows.map(r=>r.map(c=>'"'+(c+'').replace(/"/g,'""')+'"').join(',')).join('\n');
  const blob=new Blob([csv],{type:'text/csv'});const a=document.createElement('a');a.href=URL.createObjectURL(blob);a.download='match-capital-'+currentListName.toLowerCase().replace(/\s+/g,'-')+'.csv';a.click();
}

function clearCurrentList(){
  if(!confirm('Clear all investors from "'+currentListName+'"?'))return;
  namedLists[currentListName]=[];saveLists();updateSavedCount();renderSaved();
}
function deleteCurrentList(){
  if(currentListName==='Saved')return;
  if(!confirm('Delete list "'+currentListName+'"?'))return;
  delete namedLists[currentListName];saveLists();
  currentListName=Object.keys(namedLists)[0]||'Saved';
  updateSavedCount();renderSaved();
}

// ===== COMPARE =====
function toggleCompare(id){
  const idx=compareIds.indexOf(id);
  if(idx>=0)compareIds.splice(idx,1);
  else if(compareIds.length<3)compareIds.push(id);
  else{alert('Maximum 3 investors for comparison');return}
  updateCompareBar();renderResults();
  // Also re-render saved if visible
  if(document.getElementById('saved-section').style.display!=='none')renderSaved();
}
function updateCompareBar(){
  const bar=document.getElementById('compareBar');
  const avatarsEl=document.getElementById('compareAvatars');
  if(!compareIds.length){bar.classList.remove('show');return}
  bar.classList.add('show');
  avatarsEl.innerHTML=compareIds.map(id=>{const inv=investors.find(i=>i.id===id);return`<div class="mini-avatar">${initials(inv.name)}</div>`}).join('');
  document.getElementById('compareBtn').textContent='Compare '+compareIds.length+' investor'+(compareIds.length>1?'s':'');
}
function clearCompare(){compareIds=[];updateCompareBar();renderResults()}

function openCompare(){
  if(compareIds.length<2){alert('Select at least 2 investors to compare');return}
  const invs=compareIds.map(id=>investors.find(i=>i.id===id));
  const cols=invs.length;
  const rows=[
    {label:'',render:inv=>{const io=inv.entity==='organization';return`<div class="compare-cell header"><div class="avatar${io?' avatar-org':''}" style="margin:0 auto;width:48px;height:48px;border-radius:${io?'8px':'50%'};background:linear-gradient(135deg,var(--accent),var(--accent2));display:flex;align-items:center;justify-content:center;font-weight:700;color:#fff">${io?'üè¢':initials(inv.name)}</div><div class="name">${inv.name}</div><div class="firm">${io?(inv.title||''):(inv.title+' ¬∑ '+inv.firm)}</div><span class="type-badge ${typeClass(inv.type)}" style="margin-top:6px">${inv.type}</span><br><button class="compare-remove" onclick="removeFromCompare('${inv.id}')">‚úï Remove</button></div>`}},
    {label:'Thesis',render:inv=>`<div class="compare-cell">${inv.thesis}</div>`},
    {label:'Stages',render:inv=>`<div class="compare-cell">${inv.stages.map(s=>'<span class="tag tag-stage" style="margin:2px">'+s+'</span>').join('')}</div>`},
    {label:'Sectors',render:inv=>`<div class="compare-cell">${inv.sectors.map(s=>'<span class="tag tag-sector" style="margin:2px">'+s+'</span>').join('')}</div>`},
    {label:'Check Size',render:inv=>`<div class="compare-cell">${fmt(inv.checkSize.min)} ‚Äì ${fmt(inv.checkSize.max)}</div>`},
    {label:'Fund Size',render:inv=>`<div class="compare-cell">${inv.fundSize}</div>`},
    {label:'Recent Investments',render:inv=>`<div class="compare-cell">${inv.recentInvestments.map(i=>i.company+' ('+i.round+' '+i.year+')').join('<br>')}</div>`},
    {label:'Geography',render:inv=>`<div class="compare-cell">${inv.geography.join(', ')}</div>`},
    {label:'Deploying',render:inv=>`<div class="compare-cell">${inv.activelyDeploying?'<span style="color:var(--green)">‚úì Active</span>':'<span style="color:var(--text-dim)">Inactive ‚Äî '+inv.lastActive+'</span>'}</div>`},
    {label:'Links',render:inv=>`<div class="compare-cell">${[inv.links.linkedin?'<a href="'+inv.links.linkedin+'" target="_blank">LinkedIn</a>':null,inv.links.twitter?'<a href="'+inv.links.twitter+'" target="_blank">Twitter</a>':null,inv.links.website?'<a href="'+inv.links.website+'" target="_blank">Website</a>':null].filter(Boolean).join(' ¬∑ ')||'‚Äî'}</div>`}
  ];
  let html=`<button class="modal-close" onclick="closeCompare()" style="position:absolute;top:16px;right:16px;font-size:1.5rem;color:var(--text-dim);z-index:1;width:36px;height:36px;display:flex;align-items:center;justify-content:center;border-radius:50%">√ó</button>`;
  html+=`<h2 style="margin-bottom:24px;font-size:1.3rem;font-weight:700">Investor Comparison</h2>`;
  html+=`<div class="compare-grid cols-${cols}">`;
  rows.forEach(row=>{
    html+=`<div class="compare-cell label">${row.label}</div>`;
    invs.forEach(inv=>{html+=row.render(inv)});
  });
  html+='</div>';
  document.getElementById('compareModal').innerHTML=html;
  document.getElementById('compareOverlay').classList.add('open');
  document.body.style.overflow='hidden';
}
function removeFromCompare(id){
  compareIds=compareIds.filter(x=>x!==id);
  if(compareIds.length<2){closeCompare();updateCompareBar();renderResults();return}
  openCompare();updateCompareBar();renderResults();
}
function closeCompare(){document.getElementById('compareOverlay').classList.remove('open');document.body.style.overflow=''}

// ===== GO =====
init();
</script>
</body>
</html>
